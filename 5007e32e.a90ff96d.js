(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{103:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=r.a.createContext({}),s=function(e){var t=r.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=s(e.components);return r.a.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,o=b(e,["components","mdxType","originalType","parentName"]),p=s(n),u=a,m=p["".concat(c,".").concat(u)]||p[u]||d[u]||i;return n?r.a.createElement(m,l(l({ref:t},o),{},{components:n})):r.a.createElement(m,l({ref:t},o))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,c=new Array(i);c[0]=u;var l={};for(var b in t)hasOwnProperty.call(t,b)&&(l[b]=t[b]);l.originalType=e,l.mdxType="string"==typeof e?e:a,c[1]=l;for(var o=2;o<i;o++)c[o]=n[o];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},71:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return s}));var a=n(2),r=n(6),i=(n(0),n(103)),c={id:"profile",title:"Profile API",sidebar_label:"Profile"},l={unversionedId:"apis/profile",id:"apis/profile",isDocsHomePage:!1,title:"Profile API",description:"The Intilery Profile API provides a single API to read user-level customer data. Intilery now allows you to query the entire user object programmatically, including the external_ids , traits , and events that make up a user\u2019s journey through your product.",source:"@site/docs/apis/profile.md",permalink:"/docs/apis/profile",editUrl:"https://github.com/Intilery/intilery.github.io/edit/master/website/docs/apis/profile.md",sidebar_label:"Profile",sidebar:"apis",previous:{title:"API Actions",permalink:"/docs/apis/actions"}},b=[{value:"Product Highlights",id:"product-highlights",children:[]},{value:"Endpoint",id:"endpoint",children:[{value:"Headers",id:"headers",children:[]},{value:"Example Request",id:"example-request",children:[]}]},{value:"Permissions",id:"permissions",children:[]},{value:"Limits",id:"limits",children:[]},{value:"Quickstart",id:"quickstart",children:[{value:"Set up Access",id:"set-up-access",children:[]},{value:"Find a user\u2019s external id",id:"find-a-users-external-id",children:[]},{value:"Query the user\u2019s event history",id:"query-the-users-event-history",children:[]},{value:"Explore the user\u2019s event history in the response",id:"explore-the-users-event-history-in-the-response",children:[]}]},{value:"API Reference",id:"api-reference",children:[{value:"Authentication",id:"authentication",children:[]},{value:"Errors",id:"errors",children:[]},{value:"Limits",id:"limits-1",children:[]},{value:"Routes",id:"routes",children:[]},{value:"Get a Profile\u2019s Traits",id:"get-a-profiles-traits",children:[]},{value:"Get a Customer&#39;s Events",id:"get-a-customers-events",children:[]},{value:"Get a Customer&#39;s Metadata",id:"get-a-customers-metadata",children:[]},{value:"Get a Customer&#39;s Audiences",id:"get-a-customers-audiences",children:[]}]},{value:"Personalization",id:"personalization",children:[{value:"Recommended Implementation",id:"recommended-implementation",children:[]},{value:"Example Workflow",id:"example-workflow",children:[]}]}],o={rightToc:b};function s(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},o,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"The Intilery Profile API provides a single API to read user-level customer data. Intilery now allows you to query the entire user object programmatically, including the ",Object(i.b)("inlineCode",{parentName:"p"},"external_ids")," , ",Object(i.b)("inlineCode",{parentName:"p"},"traits")," , and ",Object(i.b)("inlineCode",{parentName:"p"},"events")," that make up a user\u2019s journey through your product."),Object(i.b)("p",null,"You can use this API to\u2026"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Build an in-app recommendation engine")," to show users or accounts the last 5 products they viewed but didn\u2019t purchase"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Train user-level machine learning prediction models")," to determine a users next purchase or likelihood to churn"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Empower your")," ",Object(i.b)("strong",{parentName:"li"},"sales and")," ",Object(i.b)("strong",{parentName:"li"},"support associates with the complete customer context")," by embedding the user profile in third-party tools like Zendesk or Desk.com"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Qualify leads faster")," by embedding the user event timeline in Pipedrive")),Object(i.b)("p",null,"This document has four parts\u2026"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#product-highlights"}),Object(i.b)("strong",{parentName:"a"},"Product Highlights"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#quickstart"}),Object(i.b)("strong",{parentName:"a"},"Quickstart")),": Walks you through how to get started querying your user profile in <1 min"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#api-reference"}),Object(i.b)("strong",{parentName:"a"},"API Reference")),": Retrieve a list of users sorted by recent activity or find a particular user"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"#recommended-implementation"}),Object(i.b)("strong",{parentName:"a"},"Personalization")),": Example personalization solution built on Personas using server-side personalization")),Object(i.b)("h2",{id:"product-highlights"},"Product Highlights"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("strong",{parentName:"li"},"Realtime Access")," - fetch your entire user profile"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("strong",{parentName:"li"},"Realtime Data")," \u2014 query streaming data on the user profile that just happened"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("strong",{parentName:"li"},"One Identity")," \u2014 query an end user\u2019s interactions across web, mobile, server, and third party touch-points"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("strong",{parentName:"li"},"Rich Data")," \u2014 query any amount of custom events or user traits"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("strong",{parentName:"li"},"Any External ID")," \u2014 the API supports query from any external ID: email, user_id or intilery ID")),Object(i.b)("h2",{id:"endpoint"},"Endpoint"),Object(i.b)("p",null,Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://tracking.intilery.com/track/%7BclientId%7D/%7BaccountId%7D/%7BBRANDID%7D/v1/profiles/%7BidType%7D:%7Bid%7D/%7Bendpoint%7D"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/{endpoint}")),Object(i.b)("p",null,"You will be given you clientId, accountIds and brandIDs."),Object(i.b)("p",null,"The endpoint expects a GET and returns JSON"),Object(i.b)("p",null,"Authentication is via a shared secret passed in the auth-token header."),Object(i.b)("p",null,"The actions are detailed below."),Object(i.b)("h3",{id:"headers"},"Headers"),Object(i.b)("h4",{id:"content-type"},"Content-Type"),Object(i.b)("p",null,"You must provide a content-type header of application/json"),Object(i.b)("h4",{id:"auth-token"},"Auth-Token"),Object(i.b)("p",null,"Authentication to handled by a shared secret that must be passed in a header"),Object(i.b)("h3",{id:"example-request"},"Example Request"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/{endpoint}" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(i.b)("h2",{id:"permissions"},"Permissions"),Object(i.b)("p",null,"Your Authentication token will be set with permissions at the Account and Brand level, token\u2019s can be created that have access to all Brands within an Account or a token for each Brand (and account)."),Object(i.b)("h2",{id:"limits"},"Limits"),Object(i.b)("p",null,"The API is set to 100 requests per second with a burst of 500, limit and burst explained ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Token_bucket"}),"here")),Object(i.b)("p",null,"If limits are exceeded you will receive a 429 Error (limit exceeded) response."),Object(i.b)("p",null,"The maximum size of any request is 1mb, exceeding this will return a 413 Error."),Object(i.b)("h2",{id:"quickstart"},"Quickstart"),Object(i.b)("h3",{id:"set-up-access"},"Set up Access"),Object(i.b)("p",null,"To access the profile API, you will need you clientID, accountID and brandID, along with the authentication token, these are provided by your account manager (and will shortly be available in the UI)."),Object(i.b)("p",null,"The profile API expects the authenticatino token to be supplied in the request headers."),Object(i.b)("h3",{id:"find-a-users-external-id"},"Find a user\u2019s external id"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Head over to customers > customer details: ",Object(i.b)("inlineCode",{parentName:"li"},"https://{clientID}.{accountID}.intilery.com/customers")," (replace clientID and accountID with your details)"),Object(i.b)("li",{parentName:"ol"},"And press on any interesting custoimer in the list."),Object(i.b)("li",{parentName:"ol"},"Copy their ",Object(i.b)("inlineCode",{parentName:"li"},"external_id")," (ex: ",Object(i.b)("inlineCode",{parentName:"li"},"joe.bloggs@intilery.com"),") Note: a userID (extneralD) does not have to be an email address, this is your unique id for your customer.")),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/externalid.png",alt:"externalID"}))),Object(i.b)("h3",{id:"query-the-users-event-history"},"Query the user\u2019s event history"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Download and open ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.getpostman.com/"}),"Postman"),", a nice app for exploring HTTP APIs")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Create your Postman GET request to query the user\u2019s event\u2019s history: i. The URL is: ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://tracking.intilery.com/track/%7BclientId%7D/%7BaccountId%7D/%7BBRANDID%7D/v1/profiles/%7BidType%7D:%7Bid%7D/events%60"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/events`")),Object(i.b)("p",{parentName:"li"},"ii. Replace ",Object(i.b)("inlineCode",{parentName:"p"},"clientID, accountID and BRANDID")," with your own values along with the id of your customer (",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"mailto:Joe.bloggs@intilery.com"}),"Joe.bloggs@intilery.com")," in this case)"),Object(i.b)("p",{parentName:"li"},"iii. Replace ",Object(i.b)("inlineCode",{parentName:"p"},"{idType}:{ext_id}>")," with your external id type (userId) and id pair from the customer detils page"))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/postman1.png",alt:"postman"}))),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Press the Send button in Postman.")),Object(i.b)("h3",{id:"explore-the-users-event-history-in-the-response"},"Explore the user\u2019s event history in the response"),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/postman2.png",alt:"postman"}))),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"E. Explore more of the API")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Search by an External ID")," You can query directly by a customer's email, user_id or intileryID (id):"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/userId:1234-erty/events\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Traits")," You can query a user\u2019s traits (first_name, last_name, \u2026):"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/userId:1234-erty/traits\n")),Object(i.b)("p",null,"All traits, both standard and computed traits are included"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Metadata")," You can query all of a user\u2019s metadata (created_at, updated_at, \u2026):"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/userId:1234-erty/meta\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Audiences")," You can query all of a user\u2019s audiences, both static and dynamic"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/userId:1234-erty/audiences\n")),Object(i.b)("h2",{id:"api-reference"},"API Reference"),Object(i.b)("p",null,"The Intilery API is organized around ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://en.wikipedia.org/wiki/Representational_State_Transfer"}),"REST"),". Our API has predictable, resource-oriented URLs, and uses HTTP response codes to indicate API errors. We use built-in HTTP features, like HTTP authentication and HTTP verbs, which are understood by off-the-shelf HTTP clients. ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://www.json.org/"}),"JSON")," is returned by all API responses, including errors."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Endpoint")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"https://tracking.intilery.com/track/\n")),Object(i.b)("h3",{id:"authentication"},"Authentication"),Object(i.b)("p",null,"The Profile API uses basic authentication for authorization \u2014 with the ",Object(i.b)("strong",{parentName:"p"},"Authentication Token")," as the authorization key. Your ",Object(i.b)("strong",{parentName:"p"},"Authentication Token")," carries access to all of your customer data, so be sure to keep them secret! Do not share your Access Secret in publicly accessible areas such as GitHub, client-side code, and so forth."),Object(i.b)("p",null,"Your Authentication Token will be supplied by your account manager"),Object(i.b)("p",null,"When making requests to the Profile API, use the Authentication Token as a header with key auth-token."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/{endpoint}" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(i.b)("h3",{id:"errors"},"Errors"),Object(i.b)("p",null,"Intilery uses conventional HTTP response codes to indicate the success or failure of an API request. In general, codes in the ",Object(i.b)("inlineCode",{parentName:"p"},"2xx")," range indicate success, codes in the ",Object(i.b)("inlineCode",{parentName:"p"},"4xx")," range indicate an error that failed given the information provided (e.g., a required parameter was omitted, etc.), and codes in the ",Object(i.b)("inlineCode",{parentName:"p"},"5xx"),"Intielry's servers."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"HTTP Status")),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"th"},"HTTP Status")),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"th"},"Description")))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"200 - OK")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Everything worked as expected.")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"400 - Bad Request")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The request was unacceptable, often due to missing a required parameter.")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"401 - Unauthorized")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"No valid Access Secret provided.")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"404 - Not Found")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The requested resource doesn\u2019t exist.")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"429 - Too Many Requests")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Too many requests hit the API too quickly. We recommend an exponential backoff of your requests.")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"500, 502, 503, 504 - Server Errors")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Something went wrong on Intilery's side.")))),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Error Body")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "error": {\n    "code": "validation_error",\n    "message": "ProfileID must be in format of id_type:id"\n  }\n}\n')),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"th"},"Code")),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"th"},"Message")))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"authentication_error")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Failure to properly authenticate yourself in the request.")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"invalid_request_error")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Invalid request errors arise when your request has invalid parameters.")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"rate_limit_error")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Too many requests hit the API too quickly.")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"validation_error")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Errors triggered when failing to validate fields (e.g., when a collection name has invalid characters).")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"not_found")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The customer could not be found")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"td"},"internal_server_error")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Something went wrong internal to Intilery")))),Object(i.b)("h3",{id:"limits-1"},"Limits"),Object(i.b)("p",null,"The API is set to 100 requests per second with a burst of 500, limit and burst explained ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Token_bucket"}),"here")),Object(i.b)("p",null,"If limits are exceeded you will receive a 429 Error (limit exceeded) response."),Object(i.b)("h4",{id:"request-ids"},"Request IDs"),Object(i.b)("p",null,"Each API request has an associated request identifier. You can find this value in the response headers, under ",Object(i.b)("inlineCode",{parentName:"p"},"x-amzn-RequestId"),". ",Object(i.b)("strong",{parentName:"p"},"If you need to contact us about a specific request, providing the request identifier will ensure the fastest possible resolution.")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"curl -i https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/{endpoint}\nHTTP/1.1 200 OK\nDate: Mon, 01 Jul 2013 17:27:06 GMT\nStatus: 200 OK\nx-amzn-RequestId: 1111-2222-3333-4444\n")),Object(i.b)("h3",{id:"routes"},"Routes"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"th"},"Name")),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"th"},"Route")," ",Object(i.b)("a",Object(a.a)({parentName:"th"},{href:"https://tracking.intilery.com/track/%7BclientId%7D/%7BaccountId%7D/%7BBRANDID%7D/v1/profiles/"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/")," \u2026"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get a Profile\u2019s Traits"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/email:",Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"mailto:joe.bloggs@intilery.com"}),"joe.bloggs@intilery.com"),"/traits")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get a Profile\u2019s Metadata"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/email:",Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"mailto:joe.bloggs@intilery.com"}),"joe.bloggs@intilery.com"),"/metadata")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get a Profile\u2019s Events"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/email:",Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"mailto:joe.bloggs@intilery.com"}),"joe.bloggs@intilery.com"),"/events")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get a Profile\u2019s Audiences"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/email:",Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"mailto:joe.bloggs@intilery.com"}),"joe.bloggs@intilery.com"),"/audiences")))),Object(i.b)("h3",{id:"get-a-profiles-traits"},"Get a Profile\u2019s Traits"),Object(i.b)("p",null,"Get a single customer's traits using an ",Object(i.b)("inlineCode",{parentName:"p"},"external_id"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"GET /track/v1/profiles/userId:123-rty/traits\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Examples")," Here\u2019s what it looks to search for a profile\u2019s traits by an external id, like by an ",Object(i.b)("inlineCode",{parentName:"p"},"email"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"GET /track/v1/profiles/email:joe.bloggs@intilery.com/traits\n")),Object(i.b)("p",null,"Or a id:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"GET /v1/spaces/lg8283283/collections/users/profiles/id:1234-5678-asdf-ghjk/traits\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Request")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'   curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/traits" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"404 Not Found")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "error": {\n    "code": "not_found",\n    "message": "Custmer not found."\n  }\n}\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"200 OK")," (single response)"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "lastName": "Bloggs",\n    "website": "www.intilery.com",\n    "externalId": "joe.bloggs@intilery.com",\n    "organisation": "Intilery",\n    "industry": "Other",\n    "firstName": "Joe",\n    "phone": "+44111222333444",\n    "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n    "computed": {\n      "number_email_delivered_all_time": 9,\n    }\n    "marketingPreferences": {\n        "channels": [\n            {\n                "subscribed": true,\n                "channel": "email"\n            },\n            {\n                "subscribed": true,\n                "channel": "sms"\n            },\n            {\n                "subscribed": false,\n                "channel": "whatsapp"\n            },\n            {\n                "subscribed": false,\n                "channel": "facebook"\n            },\n            {\n                "subscribed": false,\n                "channel": "push"\n            }\n        ]\n    },\n    "email": "joe.bloggs@intilery.com"\n}\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"200 OK")," (multiple response)"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "data" : [\n    {\n        "lastName": "Bloggs",\n        "website": "www.intilery.com",\n        "externalId": "joe.bloggs@intilery.com",\n        "organisation": "Intilery",\n        "industry": "Other",\n        "firstName": "Joe",\n        "phone": "+44111222333444",\n        "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n        "computed": {\n          "number_email_delivered_all_time": 9,\n        }\n        "marketingPreferences": {\n            "channels": [\n                {\n                    "subscribed": true,\n                    "channel": "email"\n                },\n                {\n                    "subscribed": true,\n                    "channel": "sms"\n                },\n                {\n                    "subscribed": false,\n                    "channel": "whatsapp"\n                },\n                {\n                    "subscribed": false,\n                    "channel": "facebook"\n                },\n                {\n                    "subscribed": false,\n                    "channel": "push"\n                }\n            ]\n        },\n        "email": "joe.bloggs@intilery.com"\n        }\n        ]\n    }\n}\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"Note")),": if you request a customer using userId or Id, the response will be a single customer's traits. For searching by email, as multiple customer records can have the same email (unless you use their email as their userId) an array of results in the data field are returned"),Object(i.b)("h3",{id:"get-a-customers-events"},"Get a Customer's Events"),Object(i.b)("p",null,"Get a single profile\u2019s events within a collection using an ",Object(i.b)("inlineCode",{parentName:"p"},"external_id"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"    GET /track/v1/profiles/userId:123-rty/events\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Request")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'   curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/events" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"404 Not Found")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "error": {\n    "code": "not_found",\n    "message": "Profile was not found."\n  }\n}\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"200 OK")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "data": [\n        {\n            "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "externalId": "joe.bloggs@intilery.com",\n            "email": "joe.bloggs@intilery.com",\n            "eventId": "ec717144-924c-4826-981b-848459c39176",\n            "eventTime": "2020-11-19T13:39:17.380Z",\n            "receivedTime": "2020-11-19T13:39:17.912Z",\n            "eventAction": "email_opened",\n            "clientId": "intilery",\n            "accountId": "marketing",\n            "brandId": "MARKETING",\n            "customerId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "source": "SEGMENT_API",\n            "rawData": {\n                "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n                "action": "track",\n                "event": "Email Opened",\n                "context": {\n                    "ip": "217.42.6.253",\n                    "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/605.1.15",\n                    "traits": {\n                        "email": "joe.bloggs@intilery.com"\n                    }\n                },\n                "properties": {\n                    "email_id": "41937e92-b472-46ae-94e3-f29cc05cda5d",\n                    "email_subject": "Thanks for requesting an Intilery trial",\n                    "campaign_id": "TRIAL_WELCOME"\n                },\n                "timestamp": "2020-11-19T13:39:17.380Z",\n                "sendType": "email"\n            }\n        },\n        {\n            "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "externalId": "joe.bloggs@intilery.com",\n            "email": "joe.bloggs@intilery.com",\n            "eventId": "4b7c99d4-0714-41e0-b285-1ef300634984",\n            "clientId": "intilery",\n            "source": "SEGMENT_API",\n            "rawData": {\n                "context": {\n                    "traits": {\n                        "email": "joe.bloggs@intilery.com"\n                    },\n                    "ip": "217.42.6.253",\n                    "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/605.1.15"\n                },\n                "sendType": "email",\n                "action": "track",\n                "event": "Email Opened",\n                "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n                "properties": {\n                    "email_id": "41937e92-b472-46ae-94e3-f29cc05cda5d",\n                    "email_subject": "Thanks for requesting an Intilery trial",\n                    "campaign_id": "TRIAL_WELCOME"\n                },\n                "timestamp": "2020-11-19T13:37:50.929Z"\n            },\n            "eventAction": "email_opened",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "accountId": "marketing",\n            "receivedTime": "2020-11-19T13:37:51.407Z",\n            "brandId": "MARKETING",\n            "eventTime": "2020-11-19T13:37:50.929Z",\n            "customerId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe"\n        }\n            ]\n        }\n    }\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"Note")),": if you request a customer using userId or Id, the response will the events for a single customer. For searching by email, as multiple customer records can have the same email (unless you use their email as their userId) events for all customers with the email specified will be included"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Query Parameters")),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"th"},"Argument")),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"th"},"Description")),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("strong",{parentName:"th"},"Example")))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"include")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A comma-separated list of event keys to include."),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"page,")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"exclude")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A comma-separated list of event keys to excluse."),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Page Viewed,Experiment Viewed")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"start")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Returns all the events that start after ",Object(i.b)("inlineCode",{parentName:"td"},"start")," (in ISO 8601)."),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"2006-01-02")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"end")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Returns all the events that end before ",Object(i.b)("inlineCode",{parentName:"td"},"end")," (in ISO 8601)."),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"2018-01-02")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("inlineCode",{parentName:"td"},"sort")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Determines whether the result is ascending or descending. Defaults to descending."),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"asc,desc")))),Object(i.b)("h3",{id:"get-a-customers-metadata"},"Get a Customer's Metadata"),Object(i.b)("p",null,"Get a single profile\u2019s metadata within a collection using an ",Object(i.b)("inlineCode",{parentName:"p"},"external_id"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"\xa0 \xa0 \xa0GET /track/v1/profiles/userId:123-rty/meta\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Request")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),'   curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/meta" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"404 Not Found")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "error": {\n    "code": "not_found",\n    "message": "Profile was not found."\n  }\n}\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"200 OK")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "lastName": "Bloggs",\n    "website": "www.intilery.com",\n    "_subscriptionId": "aW50aWxlcnk6bWFya2V0aW5nOjg3MzA1NWVmLTdmYmYtNDYyNS1iMWNkLTEwYjRlNDc5YjIwZA==",\n    "externalId": "joe.bloggs@intilery.com",\n    "organisation": "Intilery",\n    "industry": "Other",\n    "firstName": "Joe",\n    "createdBy": {\n        "filename": "staff listaug20.csv",\n        "createdTime": "2020-08-24T15:54:15.323Z",\n        "type": "audience-csv"\n    },\n    "phone": "111222333444",\n    "firstEvent": {\n        "email_sent": {\n            "eventId": "b5148168-928f-4f61-9a3d-ff1be6da5820",\n            "receivedTime": "2020-10-20T13:49:43.393Z",\n            "context": {\n                "traits": {\n                    "email": "joe.bloggs@intilery.com"\n                }\n            },\n            "sendType": "email",\n            "eventTime": "2020-10-20T13:49:41.697Z",\n            "action": "track",\n            "event": "Email Sent",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "properties": {\n                "email_id": "6adec8ad-3663-4c53-b02d-67d69de6da91",\n                "email_subject": "Everyone loves a freebie",\n                "campaign_id": "FreeTrialEshot"\n            },\n            "timestamp": "2020-10-20T13:49:41.697Z"\n        },\n      ...\n    },\n    "lastEvent": {\n        "email_sent": {\n            "eventId": "b8be0f1f-e1af-41b8-9f8c-17514f3ccad6",\n            "receivedTime": "2020-11-09T10:10:34.653Z",\n            "context": {\n                "traits": {\n                    "email": "joe.bloggs@intilery.com"\n                }\n            },\n            "sendType": "email",\n            "eventTime": "2020-11-09T10:10:33.811Z",\n            "action": "track",\n            "event": "Email Sent",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "properties": {\n                "email_id": "d67f6825-c560-4186-a2b6-516557e7151e",\n                "email_subject": "Everything you need, in one place",\n                "campaign_id": "Nov2"\n            },\n            "timestamp": "2020-11-09T10:10:33.811Z"\n        },\n        "email_opened": {\n            "eventId": "ec717144-924c-4826-981b-848459c39176",\n            "receivedTime": "2020-11-19T13:39:17.912Z",\n            "context": {\n                "ip": "217.42.6.253",\n                "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/605.1.15 ",\n                "traits": {\n                    "email": "joe.bloggs@intilery.com"\n                }\n            },\n            "sendType": "email",\n            "eventTime": "2020-11-19T13:39:17.380Z",\n            "action": "track",\n            "event": "Email Opened",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "properties": {\n                "email_id": "41937e92-b472-46ae-94e3-f29cc05cda5d",\n                "email_subject": "Thanks for requesting an Intilery trial",\n                "campaign_id": "TRIAL_WELCOME"\n            },\n            "timestamp": "2020-11-19T13:39:17.380Z"\n        },\n      ...\n    },\n    "audiences": [\n        "audience_2_days"\n    ],\n    "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n    "marketingPreferences": {\n        "channels": [\n            {\n                "subscribed": true,\n                "channel": "email"\n            },\n            {\n                "subscribed": true,\n                "channel": "sms"\n            },\n            {\n                "subscribed": false,\n                "channel": "whatsapp"\n            },\n            {\n                "subscribed": false,\n                "channel": "facebook"\n            },\n            {\n                "subscribed": false,\n                "channel": "push"\n            }\n        ]\n    },\n    "audiencesStatic": [\n        "audience_board"\n    ],\n    "lastActivityTime": "2020-11-19T13:39:17.380Z",\n    "email": "joe.bloggs@intilery.com"\n}\n')),Object(i.b)("h3",{id:"get-a-customers-audiences"},"Get a Customer's Audiences"),Object(i.b)("p",null,"Get a single profile\u2019s metadata within a collection using an ",Object(i.b)("inlineCode",{parentName:"p"},"external_id"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"\xa0 \xa0 \xa0GET /track/v1/profiles/userId:123-rty/audiences\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Request")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),'   curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/audiences" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"404 Not Found")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "error": {\n    "code": "not_found",\n    "message": "Profile was not found."\n  }\n}\n')),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"200 OK")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "lastName": "Bloggs",\n    "website": "www.intilery.com",\n    "externalId": "joe.bloggs@intilery.com",\n    "organisation": "Intilery",\n    "industry": "Other",\n    "firstName": "Joe",\n    "phone": "111222333444",\n    "audiences": [\n        "audience_124516e8-6023-4b3a-8779-bcccb5d10eaf"\n    ],\n    "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n    "marketingPreferences": {\n        "channels": [\n            {\n                "subscribed": true,\n                "channel": "email"\n            },\n            {\n                "subscribed": true,\n                "channel": "sms"\n            },\n            {\n                "subscribed": false,\n                "channel": "whatsapp"\n            },\n            {\n                "subscribed": false,\n                "channel": "facebook"\n            },\n            {\n                "subscribed": false,\n                "channel": "push"\n            }\n        ]\n    },\n    "audiencesStatic": [\n        "audience_board"\n    ],\n    "email": "joe.bloggs@intilery.com"\n}\n')),Object(i.b)("h2",{id:"personalization"},"Personalization"),Object(i.b)("h3",{id:"recommended-implementation"},"Recommended Implementation"),Object(i.b)("p",null,"Intilery provides an API where customers can fetch data about their users given an identifier (e.g email or user id) and an authorized access secret. We recommend you integrate using a server-side personalization pattern."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"https://www.lucidchart.com/publicSegments/view/25df2e70-a666-4581-8f86-1a000dbf1f49/image.png",alt:"Server-side Personalization"}))),Object(i.b)("p",null,"Since this API has access to all of a customer\u2019s data, we do not support CORS and ask that you do not expose the access secret (e.g. in a client-side app). We advise customers to create personalization service in their infrastructure that other apps, websites or services communicate with to fetch personalizations about their users."),Object(i.b)("h3",{id:"example-workflow"},"Example Workflow"),Object(i.b)("p",null,"If you want to display the most relevant blog posts given a reader\u2019s favorite blog category:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"Create a computed trait")," ",Object(i.b)("inlineCode",{parentName:"p"},"favorite_blog_category")," ",Object(i.b)("strong",{parentName:"p"},"in Intilery UI"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Create"))),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-plaintext"}),"/api/recommended-posts\n")),Object(i.b)("p",null,"   in customer-built personalization service"),Object(i.b)("p",null,"   ","[Engineer]"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Accept ",Object(i.b)("inlineCode",{parentName:"li"},"user_id"),", ",Object(i.b)("inlineCode",{parentName:"li"},"email")," or ",Object(i.b)("inlineCode",{parentName:"li"},"anonymous_id")," to fetch ",Object(i.b)("inlineCode",{parentName:"li"},"favorite_blog_category")," using API"),Object(i.b)("li",{parentName:"ul"},"Return array of most recent posts of that category to render in recommended section")),Object(i.b)("ol",{start:3},Object(i.b)("li",{parentName:"ol"},"Add recommended section to the blog")),Object(i.b)("p",null,"   ","[Engineer]"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Client-side by making a request to ",Object(i.b)("inlineCode",{parentName:"li"},"/recommended-posts")," if it accepts CORS (recommended for static blogs, WordPress plugin, or other CMS solutions)"),Object(i.b)("li",{parentName:"ul"},"Server-side by collecting all the personalizations you want to make on the blog in a single request to increase the total time to load (recommended for custom blog setup)")),Object(i.b)("p",null,"Now, users who take a few minutes to read through an article on the blog will find posts recommended using their historical reading pattern including the post they just read."))}s.isMDXComponent=!0}}]);