(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{107:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return O}));var n=a(0),r=a.n(n);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=r.a.createContext({}),p=function(e){var t=r.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},l=function(e){var t=p(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,c=e.originalType,b=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),l=p(a),m=n,O=l["".concat(b,".").concat(m)]||l[m]||d[m]||c;return a?r.a.createElement(O,o(o({ref:t},s),{},{components:a})):r.a.createElement(O,o({ref:t},s))}));function O(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var c=a.length,b=new Array(c);b[0]=m;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:n,b[1]=o;for(var s=2;s<c;s++)b[s]=a[s];return r.a.createElement.apply(null,b)}return r.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"},80:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return b})),a.d(t,"metadata",(function(){return o})),a.d(t,"rightToc",(function(){return i})),a.d(t,"default",(function(){return p}));var n=a(2),r=a(6),c=(a(0),a(107)),b={id:"actions",title:"API Actions",sidebar_label:"Actions"},o={unversionedId:"apis/actions",id:"apis/actions",isDocsHomePage:!1,title:"API Actions",description:"The track action on the API Event Endpoint will accept a number of event values that act as commands to trigger a send of a specific asset. In these cases there is no need to pass a separate properties section, as every value under the root of the object forms the start of data for use as a merge tag in the campaign, though the properties of the customer are available as usual in the merge tags.",source:"@site/docs/apis/action.md",permalink:"/docs/apis/actions",sidebar_label:"Actions",sidebar:"apis",previous:{title:"API Guide",permalink:"/docs/apis/api1"},next:{title:"Events API",permalink:"/docs/apis/events"}},i=[{value:"Example",id:"example",children:[]}],s={rightToc:i};function p(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"The track action on the API Event Endpoint will accept a number of ",Object(c.b)("strong",{parentName:"p"},"event")," values that act as commands to trigger a send of a specific asset. In these cases there is no need to pass a separate properties section, as every value under the root of the object forms the start of data for use as a merge tag in the campaign, though the properties of the customer are available as usual in the merge tags."),Object(c.b)("p",null,"Each event must be include an assetId property to match to the asset code that is being sent."),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("strong",{parentName:"th"},"event")),Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("strong",{parentName:"th"},"action")))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("strong",{parentName:"td"},"send_email")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"send the specified email")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("strong",{parentName:"td"},"send_sms")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"send the specified sms")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("strong",{parentName:"td"},"send_print")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"send the specified letter")))),Object(c.b)("p",null,"When the asset is sent, the current state of the ",Object(c.b)("strong",{parentName:"p"},"customer")," is added by the Intilery CDP as a root merge tag, so does not need to be passed in on the track event."),Object(c.b)("p",null,"Note that you can only send to a ",Object(c.b)("strong",{parentName:"p"},"customer")," who has been ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"./api1#identify-action"}),"identified")," via the ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"../apis/api1"}),"HTTP API")," or ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"../tag/reference#identify"}),"identified")," vi the ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"../tag/tag1"}),"Analytics.js tag")),Object(c.b)("h2",{id:"example"},"Example"),Object(c.b)("p",null,"POST ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://tracking.intilery.com/track/%7BclientId%7D/%7BaccountId%7D/%7BBRANDID%7D/v1/track"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/track")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n    "userId": "ABC/123",  \n    "event": "SEND_SMS",  \n    "assetId": "202007-B-AbandonedBooking",  \n    "timestamp": "2019-11-18T13:30:12.984Z",  \n    "bookingId" : "1234" \n}\n')),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"userId")),Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"required")),Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Unique identifier for the user in your database"))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"event")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"required")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"One of the commands listed above.")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"timestamp")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"required")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("a",Object(n.a)({parentName:"td"},{href:"http://en.wikipedia.org/wiki/ISO_8601"}),"ISO-8601 UTC Timestamp")," (e.g. 2019-11-18T13:30:11.444Z) for then the event happened")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"assetId")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"required")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The code of the Campaign (Asset)")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"<anything else>")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"optional"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Any valid JSON that is then available for use in the asset using merge tags (bookingId)")))))}p.isMDXComponent=!0}}]);