(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{125:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),o=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=o(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,c=e.originalType,i=e.parentName,s=b(e,["components","mdxType","originalType","parentName"]),p=o(n),u=a,m=p["".concat(i,".").concat(u)]||p[u]||d[u]||c;return n?r.a.createElement(m,l(l({ref:t},s),{},{components:n})):r.a.createElement(m,l({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var c=n.length,i=new Array(c);i[0]=u;var l={};for(var b in t)hasOwnProperty.call(t,b)&&(l[b]=t[b]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<c;s++)i[s]=n[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},95:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return o}));var a=n(2),r=n(6),c=(n(0),n(125)),i={id:"events",title:"Events API",sidebar_label:"Events"},l={unversionedId:"apis/events",id:"apis/events",isDocsHomePage:!1,title:"Events API",description:"The Intilery Events API provides a single API to read account-level event data. This API enables you to access in real-time all events that your customers are doing, where the event is sent to the Intilery CDP. By default all events are accessed most recent first (data desc) and cam be paged to access all events in a polling mechanism.",source:"@site/docs/apis/events.md",permalink:"/docs/apis/events",sidebar_label:"Events",sidebar:"apis",previous:{title:"API Commands",permalink:"/docs/apis/commands"},next:{title:"Profile API",permalink:"/docs/apis/profile"}},b=[{value:"Product Highlights",id:"product-highlights",children:[]},{value:"Endpoint",id:"endpoint",children:[{value:"Headers",id:"headers",children:[]},{value:"Example Request",id:"example-request",children:[]}]},{value:"Permissions",id:"permissions",children:[]},{value:"Limits",id:"limits",children:[]},{value:"Quickstart",id:"quickstart",children:[{value:"Set up Access",id:"set-up-access",children:[]},{value:"Access the event stream",id:"access-the-event-stream",children:[]},{value:"Explore the events returned in date desc order (default)",id:"explore-the-events-returned-in-date-desc-order-default",children:[]}]},{value:"API Reference",id:"api-reference",children:[{value:"Authentication",id:"authentication",children:[]},{value:"Errors",id:"errors",children:[]},{value:"Limits",id:"limits-1",children:[]},{value:"Pagination",id:"pagination",children:[]},{value:"Routes",id:"routes",children:[]},{value:"Get a Profile\u2019s Traits",id:"get-a-profiles-traits",children:[]},{value:"Get a Customer&#39;s Events",id:"get-a-customers-events",children:[]},{value:"Pagination",id:"pagination-1",children:[]},{value:"Get a Customer&#39;s Metadata",id:"get-a-customers-metadata",children:[]},{value:"Get a Customer&#39;s Audiences",id:"get-a-customers-audiences",children:[]}]},{value:"Personalization",id:"personalization",children:[{value:"Recommended Implementation",id:"recommended-implementation",children:[]},{value:"Example Workflow",id:"example-workflow",children:[]}]}],s={rightToc:b};function o(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"The Intilery Events API provides a single API to read account-level event data. This API enables you to access in real-time all events that your customers are doing, where the event is sent to the Intilery CDP. By default all events are accessed most recent first (data desc) and cam be paged to access all events in a polling mechanism."),Object(c.b)("p",null,"The API supports filtering of event types, filtering based on event properties, sorting and unique eventIDs."),Object(c.b)("p",null,"You can use this API to\u2026"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("strong",{parentName:"li"},"Access when a user has clicked on an email")," to perform a workflow in an integration tool like zapier (it may make sense to use an Intilery Jpurney if you do not want to integrate other tools)"),Object(c.b)("li",{parentName:"ul"},Object(c.b)("strong",{parentName:"li"},"React to an event raised in a Journey to trigger something in another tool")," to connect an agen in a call centre to a customer"),Object(c.b)("li",{parentName:"ul"},Object(c.b)("strong",{parentName:"li"},"To send a push message with your chose push message provider")," by querying for specific events and wiring up your push provider"),Object(c.b)("li",{parentName:"ul"},Object(c.b)("strong",{parentName:"li"},"New Customers")," access new customer records and send them to another system (identify event)")),Object(c.b)("p",null,"This document has four parts\u2026"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},Object(c.b)("a",Object(a.a)({parentName:"li"},{href:"#product-highlights"}),Object(c.b)("strong",{parentName:"a"},"Product Highlights"))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("a",Object(a.a)({parentName:"li"},{href:"#quickstart"}),Object(c.b)("strong",{parentName:"a"},"Quickstart")),": Walks you through how to get started querying your customer events in <1 min"),Object(c.b)("li",{parentName:"ol"},Object(c.b)("a",Object(a.a)({parentName:"li"},{href:"#api-reference"}),Object(c.b)("strong",{parentName:"a"},"API Reference")),": Retrieve a list of events sorted by recent activity or filter on specific events and their properties"),Object(c.b)("li",{parentName:"ol"},Object(c.b)("a",Object(a.a)({parentName:"li"},{href:"#integrationr"}),Object(c.b)("strong",{parentName:"a"},"Integration")),": Example of adding a customer to a facebook audience using zapier")),Object(c.b)("h2",{id:"product-highlights"},"Product Highlights"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},Object(c.b)("strong",{parentName:"li"},"Realtime Access")," - fetch your entire customer events"),Object(c.b)("li",{parentName:"ol"},Object(c.b)("strong",{parentName:"li"},"Realtime Data")," \u2014 query streaming data on events that just happened"),Object(c.b)("li",{parentName:"ol"},Object(c.b)("strong",{parentName:"li"},"Rich Data")," \u2014 receive the complete data associated with events")),Object(c.b)("h2",{id:"endpoint"},"Endpoint"),Object(c.b)("p",null,Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://tracking.intilery.com/track/%7BclientId%7D/%7BaccountId%7D/%7BBRANDID%7D/v1/events/"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/events/")),Object(c.b)("p",null,"You will be given you clientId, accountIds and brandIDs."),Object(c.b)("p",null,"The endpoint expects a GET and returns JSON"),Object(c.b)("p",null,"Authentication is via a shared secret passed in the auth-token header."),Object(c.b)("p",null,"The actions are detailed below."),Object(c.b)("h3",{id:"headers"},"Headers"),Object(c.b)("h4",{id:"content-type"},"Content-Type"),Object(c.b)("p",null,"You must provide a content-type header of application/json"),Object(c.b)("h4",{id:"auth-token"},"Auth-Token"),Object(c.b)("p",null,"Authentication to handled by a shared secret that must be passed in a header"),Object(c.b)("h3",{id:"example-request"},"Example Request"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/events" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(c.b)("h2",{id:"permissions"},"Permissions"),Object(c.b)("p",null,"Your Authentication token will be set with permissions at the Account and Brand level, token\u2019s can be created that have access to all Brands within an Account or a token for each Brand (and account)."),Object(c.b)("h2",{id:"limits"},"Limits"),Object(c.b)("p",null,"The API is set to 100 requests per second with a burst of 500, limit and burst explained ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Token_bucket"}),"here")),Object(c.b)("p",null,"If limits are exceeded you will receive a 429 Error (limit exceeded) response."),Object(c.b)("p",null,"The maximum size of any request is 1mb, exceeding this will return a 413 Error."),Object(c.b)("p",null,"The event endpoint will return a maximum of 100 events per request, along with a scrollId to scroll through the remainder of the events"),Object(c.b)("h2",{id:"quickstart"},"Quickstart"),Object(c.b)("h3",{id:"set-up-access"},"Set up Access"),Object(c.b)("p",null,"To access the events API, you will need you clientID, accountID and brandID, along with the authentication token, these are provided by your account manager (and will shortly be available in the UI)."),Object(c.b)("p",null,"The events API expects the authentication token to be supplied in the request headers."),Object(c.b)("h3",{id:"access-the-event-stream"},"Access the event stream"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"Download and open ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.getpostman.com/"}),"Postman"),", a nice app for exploring HTTP APIs")),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"Create your Postman GET request to query the user\u2019s event\u2019s history: i. The URL is: ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://tracking.intilery.com/track/%7BclientId%7D/%7BaccountId%7D/%7BBRANDID%7D/v1/events%60"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/events`")),Object(c.b)("p",{parentName:"li"},"ii. Replace ",Object(c.b)("inlineCode",{parentName:"p"},"clientID, accountID and BRANDID")," with your own values"))),Object(c.b)("p",null,Object(c.b)("img",Object(a.a)({parentName:"p"},{src:"/img/postman-events-1.png",alt:"postman"}))),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},"Press the Send button in Postman.")),Object(c.b)("h3",{id:"explore-the-events-returned-in-date-desc-order-default"},"Explore the events returned in date desc order (default)"),Object(c.b)("p",null,Object(c.b)("img",Object(a.a)({parentName:"p"},{src:"/img/postman-events-2.png",alt:"postman"}))),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"E. Explore more of the API")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Search by an External ID")," You can query directly by a customer's email, user_id or intileryID (id):"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/userId:1234-erty/events\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Traits")," You can query a user\u2019s traits (first_name, last_name, \u2026):"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/userId:1234-erty/traits\n")),Object(c.b)("p",null,"All traits, both standard and computed traits are included"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Metadata")," You can query all of a user\u2019s metadata (created_at, updated_at, \u2026):"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/userId:1234-erty/meta\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Audiences")," You can query all of a user\u2019s audiences, both static and dynamic"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/userId:1234-erty/audiences\n")),Object(c.b)("h2",{id:"api-reference"},"API Reference"),Object(c.b)("p",null,"The Intilery API is organized around ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"http://en.wikipedia.org/wiki/Representational_State_Transfer"}),"REST"),". Our API has predictable, resource-oriented URLs, and uses HTTP response codes to indicate API errors. We use built-in HTTP features, like HTTP authentication and HTTP verbs, which are understood by off-the-shelf HTTP clients. ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"http://www.json.org/"}),"JSON")," is returned by all API responses, including errors."),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Endpoint")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"https://tracking.intilery.com/track/\n")),Object(c.b)("h3",{id:"authentication"},"Authentication"),Object(c.b)("p",null,"The Profile API uses basic authentication for authorization \u2014 with the ",Object(c.b)("strong",{parentName:"p"},"Authentication Token")," as the authorization key. Your ",Object(c.b)("strong",{parentName:"p"},"Authentication Token")," carries access to all of your customer data, so be sure to keep them secret! Do not share your Access Secret in publicly accessible areas such as GitHub, client-side code, and so forth."),Object(c.b)("p",null,"Your Authentication Token will be supplied by your account manager"),Object(c.b)("p",null,"When making requests to the Profile API, use the Authentication Token as a header with key auth-token."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/{endpoint}" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(c.b)("h3",{id:"errors"},"Errors"),Object(c.b)("p",null,"Intilery uses conventional HTTP response codes to indicate the success or failure of an API request. In general, codes in the ",Object(c.b)("inlineCode",{parentName:"p"},"2xx")," range indicate success, codes in the ",Object(c.b)("inlineCode",{parentName:"p"},"4xx")," range indicate an error that failed given the information provided (e.g., a required parameter was omitted, etc.), and codes in the ",Object(c.b)("inlineCode",{parentName:"p"},"5xx"),"Intielry's servers."),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"HTTP Status")),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"HTTP Status")),Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Description")))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"200 - OK")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Everything worked as expected.")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"400 - Bad Request")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The request was unacceptable, often due to missing a required parameter.")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"401 - Unauthorized")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"No valid Access Secret provided.")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"404 - Not Found")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The requested resource doesn\u2019t exist.")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"429 - Too Many Requests")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Too many requests hit the API too quickly. We recommend an exponential backoff of your requests.")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"500, 502, 503, 504 - Server Errors")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Something went wrong on Intilery's side.")))),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Error Body")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "error": {\n    "code": "validation_error",\n    "message": "ProfileID must be in format of id_type:id"\n  }\n}\n')),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Code")),Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Message")))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"authentication_error")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Failure to properly authenticate yourself in the request.")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"invalid_request_error")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Invalid request errors arise when your request has invalid parameters.")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"rate_limit_error")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Too many requests hit the API too quickly.")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"validation_error")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Errors triggered when failing to validate fields (e.g., when a collection name has invalid characters).")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"not_found")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The customer could not be found")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"td"},"internal_server_error")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Something went wrong internal to Intilery")))),Object(c.b)("h3",{id:"limits-1"},"Limits"),Object(c.b)("p",null,"The API is set to 100 requests per second with a burst of 500, limit and burst explained ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Token_bucket"}),"here")),Object(c.b)("p",null,"If limits are exceeded you will receive a 429 Error (limit exceeded) response."),Object(c.b)("h3",{id:"pagination"},"Pagination"),Object(c.b)("p",null,"All top-level API resources have support for bulk fetches using \u201clist\u201d API methods. For instance you can list profiles, a profile\u2019s events, a profile\u2019s traits, and a profile\u2019s external_ids. These list API methods share a common structure, taking at least two parameters: ",Object(c.b)("inlineCode",{parentName:"p"},"from")," and ",Object(c.b)("inlineCode",{parentName:"p"},"size"),"."),Object(c.b)("h4",{id:"request-arguments"},"Request Arguments"),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Argument")),Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Description")))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"from")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"An integer representing the page of results to return, default is 0.")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"size")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A limit on the number of objects to be returned, between 1 and 100.")))),Object(c.b)("h4",{id:"request-ids"},"Request IDs"),Object(c.b)("p",null,"Each API request has an associated request identifier. You can find this value in the response headers, under ",Object(c.b)("inlineCode",{parentName:"p"},"x-amzn-RequestId"),". ",Object(c.b)("strong",{parentName:"p"},"If you need to contact us about a specific request, providing the request identifier will ensure the fastest possible resolution.")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"curl -i https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/{endpoint}\nHTTP/1.1 200 OK\nDate: Mon, 01 Jul 2013 17:27:06 GMT\nStatus: 200 OK\nx-amzn-RequestId: 1111-2222-3333-4444\n")),Object(c.b)("h3",{id:"routes"},"Routes"),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Name")),Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Route")," ",Object(c.b)("a",Object(a.a)({parentName:"th"},{href:"https://tracking.intilery.com/track/%7BclientId%7D/%7BaccountId%7D/%7BBRANDID%7D/v1/profiles/"}),"https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/")," \u2026"))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get a Profile\u2019s Traits"),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/email:",Object(c.b)("a",Object(a.a)({parentName:"td"},{href:"mailto:joe.bloggs@intilery.com"}),"joe.bloggs@intilery.com"),"/traits")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get a Profile\u2019s Metadata"),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/email:",Object(c.b)("a",Object(a.a)({parentName:"td"},{href:"mailto:joe.bloggs@intilery.com"}),"joe.bloggs@intilery.com"),"/metadata")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get a Profile\u2019s Events"),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/email:",Object(c.b)("a",Object(a.a)({parentName:"td"},{href:"mailto:joe.bloggs@intilery.com"}),"joe.bloggs@intilery.com"),"/events")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Get a Profile\u2019s Audiences"),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"/email:",Object(c.b)("a",Object(a.a)({parentName:"td"},{href:"mailto:joe.bloggs@intilery.com"}),"joe.bloggs@intilery.com"),"/audiences")))),Object(c.b)("h3",{id:"get-a-profiles-traits"},"Get a Profile\u2019s Traits"),Object(c.b)("p",null,"Get a single customer's traits using an ",Object(c.b)("inlineCode",{parentName:"p"},"external_id"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"GET /track/v1/profiles/userId:123-rty/traits\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Examples")," Here\u2019s what it looks to search for a profile\u2019s traits by an external id, like by an ",Object(c.b)("inlineCode",{parentName:"p"},"email"),":"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"GET /track/v1/profiles/email:joe.bloggs@intilery.com/traits\n")),Object(c.b)("p",null,"Or a id:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"GET /v1/spaces/lg8283283/collections/users/profiles/id:1234-5678-asdf-ghjk/traits\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Request")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'   curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/traits" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"404 Not Found")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "error": {\n    "code": "not_found",\n    "message": "Custmer not found."\n  }\n}\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"200 OK")," (single response)"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "lastName": "Bloggs",\n    "website": "www.intilery.com",\n    "externalId": "joe.bloggs@intilery.com",\n    "organisation": "Intilery",\n    "industry": "Other",\n    "firstName": "Joe",\n    "phone": "+44111222333444",\n    "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n    "computed": {\n      "number_email_delivered_all_time": 9,\n    }\n    "marketingPreferences": {\n        "channels": [\n            {\n                "subscribed": true,\n                "channel": "email"\n            },\n            {\n                "subscribed": true,\n                "channel": "sms"\n            },\n            {\n                "subscribed": false,\n                "channel": "whatsapp"\n            },\n            {\n                "subscribed": false,\n                "channel": "facebook"\n            },\n            {\n                "subscribed": false,\n                "channel": "push"\n            }\n        ]\n    },\n    "email": "joe.bloggs@intilery.com"\n}\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"200 OK")," (multiple response)"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "data" : [\n    {\n        "lastName": "Bloggs",\n        "website": "www.intilery.com",\n        "externalId": "joe.bloggs@intilery.com",\n        "organisation": "Intilery",\n        "industry": "Other",\n        "firstName": "Joe",\n        "phone": "+44111222333444",\n        "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n        "computed": {\n          "number_email_delivered_all_time": 9,\n        }\n        "marketingPreferences": {\n            "channels": [\n                {\n                    "subscribed": true,\n                    "channel": "email"\n                },\n                {\n                    "subscribed": true,\n                    "channel": "sms"\n                },\n                {\n                    "subscribed": false,\n                    "channel": "whatsapp"\n                },\n                {\n                    "subscribed": false,\n                    "channel": "facebook"\n                },\n                {\n                    "subscribed": false,\n                    "channel": "push"\n                }\n            ]\n        },\n        "email": "joe.bloggs@intilery.com"\n        }\n        ]\n    }\n}\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},Object(c.b)("em",{parentName:"strong"},"Note")),": if you request a customer using userId or Id, the response will be a single customer's traits. For searching by email, as multiple customer records can have the same email (unless you use their email as their userId) an array of results in the data field are returned"),Object(c.b)("h3",{id:"get-a-customers-events"},"Get a Customer's Events"),Object(c.b)("p",null,"Get a single profile\u2019s events within a collection using an ",Object(c.b)("inlineCode",{parentName:"p"},"external_id"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"    GET /track/v1/profiles/userId:123-rty/events\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Request")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'   curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/events" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"404 Not Found")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "error": {\n    "code": "not_found",\n    "message": "Profile was not found."\n  }\n}\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"200 OK")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "scrollId": "DnF1ZXJ5VGhlbkZldGNoBQAAAAAAMzh3FmNJLUxtbGYyVFV5WVU1Uk9TcnM5NVEAAAAAADM4ehZjSS1MbWxmMlRVeVlVNVJPU3JzOTVRAAAAAAAzOHgWY0ktTG1sZjJUVXlZVTVST1Nyczk1UQAAAAAAMzh7FmNJLUxtbGYyVFV5WVU1Uk9TcnM5NVEAAAAAADM4eRZjSS1MbWxmMlRVeVlVNVJPU3JzOTVR",\n    "data": [\n        {\n            "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "externalId": "joe.bloggs@intilery.com",\n            "email": "joe.bloggs@intilery.com",\n            "eventId": "ec717144-924c-4826-981b-848459c39176",\n            "eventTime": "2020-11-19T13:39:17.380Z",\n            "receivedTime": "2020-11-19T13:39:17.912Z",\n            "eventAction": "email_opened",\n            "clientId": "intilery",\n            "accountId": "marketing",\n            "brandId": "MARKETING",\n            "customerId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "source": "SEGMENT_API",\n            "rawData": {\n                "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n                "action": "track",\n                "event": "Email Opened",\n                "context": {\n                    "ip": "217.42.6.253",\n                    "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/605.1.15",\n                    "traits": {\n                        "email": "joe.bloggs@intilery.com"\n                    }\n                },\n                "properties": {\n                    "email_id": "41937e92-b472-46ae-94e3-f29cc05cda5d",\n                    "email_subject": "Thanks for requesting an Intilery trial",\n                    "campaign_id": "TRIAL_WELCOME"\n                },\n                "timestamp": "2020-11-19T13:39:17.380Z",\n                "sendType": "email"\n            }\n        },\n        {\n            "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "externalId": "joe.bloggs@intilery.com",\n            "email": "joe.bloggs@intilery.com",\n            "eventId": "4b7c99d4-0714-41e0-b285-1ef300634984",\n            "clientId": "intilery",\n            "source": "SEGMENT_API",\n            "rawData": {\n                "context": {\n                    "traits": {\n                        "email": "joe.bloggs@intilery.com"\n                    },\n                    "ip": "217.42.6.253",\n                    "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/605.1.15"\n                },\n                "sendType": "email",\n                "action": "track",\n                "event": "Email Opened",\n                "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n                "properties": {\n                    "email_id": "41937e92-b472-46ae-94e3-f29cc05cda5d",\n                    "email_subject": "Thanks for requesting an Intilery trial",\n                    "campaign_id": "TRIAL_WELCOME"\n                },\n                "timestamp": "2020-11-19T13:37:50.929Z"\n            },\n            "eventAction": "email_opened",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "accountId": "marketing",\n            "receivedTime": "2020-11-19T13:37:51.407Z",\n            "brandId": "MARKETING",\n            "eventTime": "2020-11-19T13:37:50.929Z",\n            "customerId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe"\n        }\n            ]\n        }\n    }\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},Object(c.b)("em",{parentName:"strong"},"Note")),": if you request a customer using userId or Id, the response will the events for a single customer. For searching by email, as multiple customer records can have the same email (unless you use their email as their userId) events for all customers with the email specified will be included"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Query Parameters")),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Argument")),Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Description")),Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Example")))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"include")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A comma-separated list of event keys to include."),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"page,")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"exclude")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"A comma-separated list of event keys to excluse."),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Page Viewed,Experiment Viewed")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"start")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Returns all the events that start after ",Object(c.b)("inlineCode",{parentName:"td"},"start")," (in ISO 8601)."),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"2006-01-02")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"end")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Returns all the events that end before ",Object(c.b)("inlineCode",{parentName:"td"},"end")," (in ISO 8601)."),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"2018-01-02")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"sort")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Determines whether the result is ascending or descending. Defaults to descending."),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"asc,desc")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"limit")),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The number of results to return, accepts an integer between 1 and 100 inclusive, default is 100"),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"50")))),Object(c.b)("h3",{id:"pagination-1"},"Pagination"),Object(c.b)("p",null,'The events endpoint supports pagination using a scrollId (cursor), to fetch the next "page" of results, replace the query parameters with the scrollId parameter'),Object(c.b)("h4",{id:"request-arguments-1"},"Request Arguments"),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Argument")),Object(c.b)("th",Object(a.a)({parentName:"tr"},{align:null}),Object(c.b)("strong",{parentName:"th"},"Description")))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"scrollId"),Object(c.b)("td",Object(a.a)({parentName:"tr"},{align:null}),'The id of the "cursor" to the next page of results')))),Object(c.b)("h4",{id:"example"},"Example"),Object(c.b)("p",null,'Given the event request example above, the response included a "scrollId" that can be used to get the next page of results.'),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},Object(c.b)("em",{parentName:"strong"},"Note:"))," a scrollId is always included regardless of whether there are any more results, a request including the scrollId whioch returns an a response with an empty array for the data indicates no more results, or a response with less results than the limit supplied indicates that this is the last page of results"),Object(c.b)("p",null,"Get a single profile\u2019s events within a collection using an ",Object(c.b)("inlineCode",{parentName:"p"},"external_id"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"    GET /track/v1/profiles/userId:123-rty/events\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Request")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),'   curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/events?scrollId={scrollId}" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},Object(c.b)("em",{parentName:"strong"},"Note:"))," it is not required to pass in any of the event parameters again, such as include, exclude, limit, start, end, sort. The scrollId is a cursor to the original request"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"400 Invalid Request")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "error": {\n        "code": "invalid_request_error",\n        "message": "scrollId is invalid or has timed out"\n    }\n}\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"200 OK")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "scrollId": "DnF1ZXJ5VGhlbkZldGNoBQAAAAAAMzh3FmNJLUxtbGYyVFV5WVU1Uk9TcnM5NVEAAAAAADM4ehZjSS1MbWxmMlRVeVlVNVJPU3JzOTVRAAAAAAAzOHgWY0ktTG1sZjJUVXlZVTVST1Nyczk1UQAAAAAAMzh7FmNJLUxtbGYyVFV5WVU1Uk9TcnM5NVEAAAAAADM4eRZjSS1MbWxmMlRVeVlVNVJPU3JzOTVR",\n    "data": [\n        {\n            "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "externalId": "joe.bloggs@intilery.com",\n            "email": "joe.bloggs@intilery.com",\n            "eventId": "ec717144-924c-4826-981b-848459c39176",\n            "eventTime": "2020-11-19T13:39:17.380Z",\n            "receivedTime": "2020-11-19T13:39:17.912Z",\n            "eventAction": "email_opened",\n            "clientId": "intilery",\n            "accountId": "marketing",\n            "brandId": "MARKETING",\n            "customerId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "source": "SEGMENT_API",\n            "rawData": {\n                "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n                "action": "track",\n                "event": "Email Opened",\n                "context": {\n                    "ip": "217.42.6.253",\n                    "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/605.1.15",\n                    "traits": {\n                        "email": "joe.bloggs@intilery.com"\n                    }\n                },\n                "properties": {\n                    "email_id": "41937e92-b472-46ae-94e3-f29cc05cda5d",\n                    "email_subject": "Thanks for requesting an Intilery trial",\n                    "campaign_id": "TRIAL_WELCOME"\n                },\n                "timestamp": "2020-11-19T13:39:17.380Z",\n                "sendType": "email"\n            }\n        },\n        {\n            "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "externalId": "joe.bloggs@intilery.com",\n            "email": "joe.bloggs@intilery.com",\n            "eventId": "4b7c99d4-0714-41e0-b285-1ef300634984",\n            "clientId": "intilery",\n            "source": "SEGMENT_API",\n            "rawData": {\n                "context": {\n                    "traits": {\n                        "email": "joe.bloggs@intilery.com"\n                    },\n                    "ip": "217.42.6.253",\n                    "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/605.1.15"\n                },\n                "sendType": "email",\n                "action": "track",\n                "event": "Email Opened",\n                "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n                "properties": {\n                    "email_id": "41937e92-b472-46ae-94e3-f29cc05cda5d",\n                    "email_subject": "Thanks for requesting an Intilery trial",\n                    "campaign_id": "TRIAL_WELCOME"\n                },\n                "timestamp": "2020-11-19T13:37:50.929Z"\n            },\n            "eventAction": "email_opened",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "accountId": "marketing",\n            "receivedTime": "2020-11-19T13:37:51.407Z",\n            "brandId": "MARKETING",\n            "eventTime": "2020-11-19T13:37:50.929Z",\n            "customerId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe"\n        }\n            ]\n        }\n    }\n')),Object(c.b)("p",null,"200 OK**"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "scrollId": "DnF1ZXJ5VGhlbkZldGNoBQAAAAAAMzh3FmNJLUxtbGYyVFV5WVU1Uk9TcnM5NVEAAAAAADM4ehZjSS1MbWxmMlRVeVlVNVJPU3JzOTVRAAAAAAAzOHgWY0ktTG1sZjJUVXlZVTVST1Nyczk1UQAAAAAAMzh7FmNJLUxtbGYyVFV5WVU1Uk9TcnM5NVEAAAAAADM4eRZjSS1MbWxmMlRVeVlVNVJPU3JzOTVR",\n    "data": []\n        }\n    }\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},Object(c.b)("em",{parentName:"strong"},"Note:"))," The data property will contain an empty array if there are no more results"),Object(c.b)("h3",{id:"get-a-customers-metadata"},"Get a Customer's Metadata"),Object(c.b)("p",null,"Get a single profile\u2019s metadata within a collection using an ",Object(c.b)("inlineCode",{parentName:"p"},"external_id"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"\xa0 \xa0 \xa0GET /track/v1/profiles/userId:123-rty/meta\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Request")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'   curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/meta" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"404 Not Found")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "error": {\n    "code": "not_found",\n    "message": "Profile was not found."\n  }\n}\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"200 OK")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "lastName": "Bloggs",\n    "website": "www.intilery.com",\n    "_subscriptionId": "aW50aWxlcnk6bWFya2V0aW5nOjg3MzA1NWVmLTdmYmYtNDYyNS1iMWNkLTEwYjRlNDc5YjIwZA==",\n    "externalId": "joe.bloggs@intilery.com",\n    "organisation": "Intilery",\n    "industry": "Other",\n    "firstName": "Joe",\n    "createdBy": {\n        "filename": "staff listaug20.csv",\n        "createdTime": "2020-08-24T15:54:15.323Z",\n        "type": "audience-csv"\n    },\n    "phone": "111222333444",\n    "firstEvent": {\n        "email_sent": {\n            "eventId": "b5148168-928f-4f61-9a3d-ff1be6da5820",\n            "receivedTime": "2020-10-20T13:49:43.393Z",\n            "context": {\n                "traits": {\n                    "email": "joe.bloggs@intilery.com"\n                }\n            },\n            "sendType": "email",\n            "eventTime": "2020-10-20T13:49:41.697Z",\n            "action": "track",\n            "event": "Email Sent",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "properties": {\n                "email_id": "6adec8ad-3663-4c53-b02d-67d69de6da91",\n                "email_subject": "Everyone loves a freebie",\n                "campaign_id": "FreeTrialEshot"\n            },\n            "timestamp": "2020-10-20T13:49:41.697Z"\n        },\n      ...\n    },\n    "lastEvent": {\n        "email_sent": {\n            "eventId": "b8be0f1f-e1af-41b8-9f8c-17514f3ccad6",\n            "receivedTime": "2020-11-09T10:10:34.653Z",\n            "context": {\n                "traits": {\n                    "email": "joe.bloggs@intilery.com"\n                }\n            },\n            "sendType": "email",\n            "eventTime": "2020-11-09T10:10:33.811Z",\n            "action": "track",\n            "event": "Email Sent",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "properties": {\n                "email_id": "d67f6825-c560-4186-a2b6-516557e7151e",\n                "email_subject": "Everything you need, in one place",\n                "campaign_id": "Nov2"\n            },\n            "timestamp": "2020-11-09T10:10:33.811Z"\n        },\n        "email_opened": {\n            "eventId": "ec717144-924c-4826-981b-848459c39176",\n            "receivedTime": "2020-11-19T13:39:17.912Z",\n            "context": {\n                "ip": "217.42.6.253",\n                "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/605.1.15 ",\n                "traits": {\n                    "email": "joe.bloggs@intilery.com"\n                }\n            },\n            "sendType": "email",\n            "eventTime": "2020-11-19T13:39:17.380Z",\n            "action": "track",\n            "event": "Email Opened",\n            "userId": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n            "properties": {\n                "email_id": "41937e92-b472-46ae-94e3-f29cc05cda5d",\n                "email_subject": "Thanks for requesting an Intilery trial",\n                "campaign_id": "TRIAL_WELCOME"\n            },\n            "timestamp": "2020-11-19T13:39:17.380Z"\n        },\n      ...\n    },\n    "audiences": [\n        "audience_2_days"\n    ],\n    "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n    "marketingPreferences": {\n        "channels": [\n            {\n                "subscribed": true,\n                "channel": "email"\n            },\n            {\n                "subscribed": true,\n                "channel": "sms"\n            },\n            {\n                "subscribed": false,\n                "channel": "whatsapp"\n            },\n            {\n                "subscribed": false,\n                "channel": "facebook"\n            },\n            {\n                "subscribed": false,\n                "channel": "push"\n            }\n        ]\n    },\n    "audiencesStatic": [\n        "audience_board"\n    ],\n    "lastActivityTime": "2020-11-19T13:39:17.380Z",\n    "email": "joe.bloggs@intilery.com"\n}\n')),Object(c.b)("h3",{id:"get-a-customers-audiences"},"Get a Customer's Audiences"),Object(c.b)("p",null,"Get a single profile\u2019s metadata within a collection using an ",Object(c.b)("inlineCode",{parentName:"p"},"external_id"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-http"}),"\xa0 \xa0 \xa0GET /track/v1/profiles/userId:123-rty/audiences\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Request")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),'   curl "https://tracking.intilery.com/track/{clientId}/{accountId}/{BRANDID}/v1/profiles/{idType}:{id}/audiences" -i -X GET \\ -H "content-type: application/json" \\ -H "auth-token: 1234abcd"\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"404 Not Found")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "error": {\n    "code": "not_found",\n    "message": "Profile was not found."\n  }\n}\n')),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"200 OK")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "lastName": "Bloggs",\n    "website": "www.intilery.com",\n    "externalId": "joe.bloggs@intilery.com",\n    "organisation": "Intilery",\n    "industry": "Other",\n    "firstName": "Joe",\n    "phone": "111222333444",\n    "audiences": [\n        "audience_124516e8-6023-4b3a-8779-bcccb5d10eaf"\n    ],\n    "id": "4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe",\n    "marketingPreferences": {\n        "channels": [\n            {\n                "subscribed": true,\n                "channel": "email"\n            },\n            {\n                "subscribed": true,\n                "channel": "sms"\n            },\n            {\n                "subscribed": false,\n                "channel": "whatsapp"\n            },\n            {\n                "subscribed": false,\n                "channel": "facebook"\n            },\n            {\n                "subscribed": false,\n                "channel": "push"\n            }\n        ]\n    },\n    "audiencesStatic": [\n        "audience_board"\n    ],\n    "email": "joe.bloggs@intilery.com"\n}\n')),Object(c.b)("h2",{id:"personalization"},"Personalization"),Object(c.b)("h3",{id:"recommended-implementation"},"Recommended Implementation"),Object(c.b)("p",null,"Intilery provides an API where customers can fetch data about their users given an identifier (e.g email or user id) and an authorized access secret. We recommend you integrate using a server-side personalization pattern."),Object(c.b)("p",null,Object(c.b)("img",Object(a.a)({parentName:"p"},{src:"https://www.lucidchart.com/publicSegments/view/25df2e70-a666-4581-8f86-1a000dbf1f49/image.png",alt:"Server-side Personalization"}))),Object(c.b)("p",null,"Since this API has access to all of a customer\u2019s data, we do not support CORS and ask that you do not expose the access secret (e.g. in a client-side app). We advise customers to create personalization service in their infrastructure that other apps, websites or services communicate with to fetch personalizations about their users."),Object(c.b)("h3",{id:"example-workflow"},"Example Workflow"),Object(c.b)("p",null,"If you want to display the most relevant blog posts given a reader\u2019s favorite blog category:"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},Object(c.b)("strong",{parentName:"p"},"Create a computed trait")," ",Object(c.b)("inlineCode",{parentName:"p"},"favorite_blog_category")," ",Object(c.b)("strong",{parentName:"p"},"in Intilery UI"))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"Create"))),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-plaintext"}),"/api/recommended-posts\n")),Object(c.b)("p",null,"   in customer-built personalization service"),Object(c.b)("p",null,"   ","[Engineer]"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Accept ",Object(c.b)("inlineCode",{parentName:"li"},"user_id"),", ",Object(c.b)("inlineCode",{parentName:"li"},"email")," or ",Object(c.b)("inlineCode",{parentName:"li"},"anonymous_id")," to fetch ",Object(c.b)("inlineCode",{parentName:"li"},"favorite_blog_category")," using API"),Object(c.b)("li",{parentName:"ul"},"Return array of most recent posts of that category to render in recommended section")),Object(c.b)("ol",{start:3},Object(c.b)("li",{parentName:"ol"},"Add recommended section to the blog")),Object(c.b)("p",null,"   ","[Engineer]"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Client-side by making a request to ",Object(c.b)("inlineCode",{parentName:"li"},"/recommended-posts")," if it accepts CORS (recommended for static blogs, WordPress plugin, or other CMS solutions)"),Object(c.b)("li",{parentName:"ul"},"Server-side by collecting all the personalizations you want to make on the blog in a single request to increase the total time to load (recommended for custom blog setup)")),Object(c.b)("p",null,"Now, users who take a few minutes to read through an article on the blog will find posts recommended using their historical reading pattern including the post they just read."))}o.isMDXComponent=!0}}]);