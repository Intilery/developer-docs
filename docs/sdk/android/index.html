<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-9T47KP3LPV","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Intilery Documentation" href="/opensearch.xml"><title data-react-helmet="true">Intilery android Mobile SDK | Intilery Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Intilery android Mobile SDK | Intilery Documentation"><meta data-react-helmet="true" name="description" content="Analytics for Android makes it simple to send your data to Intilery."><meta data-react-helmet="true" property="og:description" content="Analytics for Android makes it simple to send your data to Intilery."><meta data-react-helmet="true" property="og:url" content="https://intilery.com/docs/sdk/android"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://intilery.com/docs/sdk/android"><link rel="stylesheet" href="/styles.53afc697.css">
<link rel="preload" href="/styles.10a908dc.js" as="script">
<link rel="preload" href="/runtime~main.e57862d9.js" as="script">
<link rel="preload" href="/main.032e272f.js" as="script">
<link rel="preload" href="/1.1a84291b.js" as="script">
<link rel="preload" href="/2.62dafb1b.js" as="script">
<link rel="preload" href="/3.653c2984.js" as="script">
<link rel="preload" href="/1be78505.ec0c1a47.js" as="script">
<link rel="preload" href="/56.dd781550.js" as="script">
<link rel="preload" href="/20ac7829.a0ce566a.js" as="script">
<link rel="preload" href="/17896441.6875d58f.js" as="script">
<link rel="preload" href="/f6ce9845.7ffe9bda.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="intilery"><strong class="navbar__title">intilery</strong></a><a class="navbar__item navbar__link" href="/docs/guides/contents">Guides</a><a class="navbar__item navbar__link" href="/docs/apis/api1">APIs</a><a class="navbar__item navbar__link" href="/docs/tag/tag1">Tag</a><a class="navbar__item navbar__link" href="/docs/sdk/ios">SDK</a><a class="navbar__item navbar__link" href="/docs/schema/contents">Schema</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/Intilery/intilery.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="intilery"><strong class="navbar__title">intilery</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/guides/contents">Guides</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/apis/api1">APIs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tag/tag1">Tag</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/sdk/ios">SDK</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/schema/contents">Schema</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/Intilery/intilery.github.io" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ios</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdk/ios">iOS Mobile SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdk/ios-quickstart">iOS Quickstart tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdk/ios14">iOS 14 Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdk/ios-trouble">Troubleshooting Intilery-iOS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdk/ios-faq">Intilery iOS FAQs</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">android</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/sdk/android">android Mobile SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk/android-quickstart">android Quickstart tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk/android-trouble">Troubleshooting Intilery-android</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk/android-faq">Intilery android FAQs</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Intilery android Mobile SDK</h1></header><div class="markdown"><p>Analytics for Android makes it simple to send your data to Intilery.</p><p>All of Intilery&#x27;s client sources are open-source, so you can <a href="https://github.com/Intilery/analytics-android" target="_blank" rel="noopener noreferrer">view Analytics for Android on GitHub</a></p><p>Want to stay updated on releases? Subscribe to the <a href="https://github.com/Intilery/analytics-android/releases.atom" target="_blank" rel="noopener noreferrer">release feed</a>.</p><p>Analytics for Android only supports any Android device running API 14 (Android 4.0) and higher. This includes Amazon Fire devices.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="analytics-android-and-unique-identifiers"></a>Analytics-Android and Unique Identifiers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#analytics-android-and-unique-identifiers" title="Direct link to heading">#</a></h2><p>One of the most important parts of any analytics platform is the ability to consistently and accurately identify users. To do this, the platform must assign and persist some form of identification on the device, so you can analyze user actions effectively. This is especially important for funnel conversion analysis and retention analysis.</p><p>Naturally the Analytics SDK needs a unique ID for each user. The very first time an Android app that uses Intilery launches, the Intilery SDK generates a UUID and saves it on the device’s disk. This is used as the <code>anonymousId</code> and stays constant for the user on the device. To create a new user on the same device, call <code>reset</code> on the Analytics client.</p><p>The Intilery SDK also collects the <a href="https://developer.android.com/google/play-services/id.html" target="_blank" rel="noopener noreferrer">Advertising ID</a> provided by Play Services. Make sure the Play Services Ads library is included as a dependency for your application. This is the ID that should be used for advertising purposes. This value is set to <code>context.device.advertisingId</code>.</p><p>Intilery also collects the <a href="http://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID" target="_blank" rel="noopener noreferrer">Android ID</a> as <code>context.device.id</code>. Some destinations rely on this field being the Android ID, so double check the destinations’ vendor documentation if you choose to override the default value.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="api-call-queuing-in-analytics-android"></a>API call queuing in Analytics-Android<a aria-hidden="true" tabindex="-1" class="hash-link" href="#api-call-queuing-in-analytics-android" title="Direct link to heading">#</a></h2><p>The Analytics-Android library queues API calls and uploads them in batches. This limits the number of network calls made, and helps save battery on the user’s device.</p><p>When you send an event, the library saves it to disk. When the queue size reaches the maximum size you specify (20 by default), the library flushes the queue and uploads the events in a single batch. Since the data is saved immediately, it isn’t lost even if the app is killed or the operating system crashes.</p><p>The queue behavior might differ for Device-mode destinations. For example, Mixpanel’s SDK queues events and then flushes them only when the app goes to the background.</p><p>This is why even if you see events in the debugger, the Device-mode destination may not show them on their dashboards yet because they might still be in their mobile SDK’s queue. The opposite may also happen: the Device-mode destination SDK might send events to its servers before Intilery sends its queue, so events could show up in the destination’s dashboard before they appear in the Intilery debugger.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="queue-persistance-in-analytics-android"></a>Queue persistance in Analytics-Android<a aria-hidden="true" tabindex="-1" class="hash-link" href="#queue-persistance-in-analytics-android" title="Direct link to heading">#</a></h3><p>Analytics-Android uses a persistent disk queue, so the events persist even when the app is killed. On app restart, the library reads them from disk and uploads the events. The queue works on top of <a href="http://square.github.io/tape/" target="_blank" rel="noopener noreferrer">Tape</a>, which is designed to even survive process and system crashes.</p><p>Analytics-Android saves up to 1000 calls on disk, and these never expire.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="getting-started"></a>Getting Started<a aria-hidden="true" tabindex="-1" class="hash-link" href="#getting-started" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-1-install-the-library"></a>Step 1: Install the Library<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-1-install-the-library" title="Direct link to heading">#</a></h3><p>The easiest way to install the Analytics-Android library is using a build system like Gradle. This makes it simple to upgrade versions and add destinations. The library is distributed using <a href="http://maven.org/" target="_blank" rel="noopener noreferrer">Maven Central</a>. Just add the <code>analytics</code> module to your <code>build.gradle</code> file as in the example lines below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">dependencies {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  implementation &#x27;com.segment.analytics.android:analytics:4.+&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="packaging-sdks-for-device-mode-destinations"></a>Packaging SDKs for Device-mode destinations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#packaging-sdks-for-device-mode-destinations" title="Direct link to heading">#</a></h4><p>To keep the Analytics-Android SDK lightweight, the <code>analytics</code> artifact only installs the Intilery destination. This means that all your data is sent using Intilery’s servers to any tools you’ve enabled with cloud-mode-compatible destinations.</p><p><a href="https://segment.com/docs/connections/destinations/#connection-modes" target="_blank" rel="noopener noreferrer">As described here</a>, some destinations require or offer <strong>Device-mode</strong> SDKs. for these destinations, you must package the destination SDK, which might <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#packaging-device-mode-destination-sdks" target="_blank" rel="noopener noreferrer">require some additional steps</a>.</p><p>Now that the SDK is installed and set up, you’re ready to…</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-2-initialize-the-client"></a>Step 2. Initialize the Client<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-2-initialize-the-client" title="Direct link to heading">#</a></h3><p>We recommend initializing the client in your <code>Application</code> subclass. You’ll need your <a href="https://segment.com/docs/connections/find-writekey/" target="_blank" rel="noopener noreferrer">Intilery Write Key</a> for your Android Source.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Create an analytics client with the given context and Intilery write key.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics analytics = new Analytics.Builder(context, YOUR_WRITE_KEY)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .trackApplicationLifecycleEvents() // Enable this to record certain application events automatically!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .recordScreenViews() // Enable this to record screen views automatically!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .build();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Set the initialized instance as a globally accessible instance.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.setSingletonInstance(analytics);</span></div></div></div></div></div><p><strong>Notes</strong>:</p><ul><li>You can automatically track lifecycle events such as <code>Application Opened</code>, <code>Application Installed</code>, <code>Application Updated</code> to start quickly with core events. These are optional, but highly recommended.</li><li>This only installs the Intilery destination. This means that all your data is sent server-side to tools. To bundle additional destinations client-side, you’ll need to take some additional steps as <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#packaging-sdks-for-device-mode-destinations" target="_blank" rel="noopener noreferrer">shown here</a>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="customize-the-client-optional"></a>Customize the Client (Optional)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#customize-the-client-optional" title="Direct link to heading">#</a></h3><p>The entry point of the library is through the <code>Analytics</code> class. As you might have seen in the quickstart, here’s how you initialize the Analytics client with it’s defaults.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics analytics = new Analytics.Builder(context, writeKey).build();</span></div></div></div></div></div><p>The <code>Analytics.Builder</code> class lets you customize settings for the Analytics client, including things like the flush interval and packaging Device-mode destinations. Refer to the Javadocs for details on customizable parameters.</p><p>We also maintain a global default instance which is initialized with defaults suitable to most implementations.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// You can also register your custom instance as a global singleton.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.setSingletonInstance(analytics);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).track(...);</span></div></div></div></div></div><p>In general, Intilery recommends that you use the Builder method because it provides the most flexibility. Remember you can call <code>Analytics.setSingletonInstance</code> only <em>ONCE</em>, so it’s best to put the initialization code inside your custom Application class.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class MyApp extends Application {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  @Override public void onCreate() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Analytics analytics = new Analytics.Builder(context, writeKey).build();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Analytics.setSingletonInstance(analytics);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Safely call Analytics.with(context) from anywhere within your app!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Analytics.with(context).track(&quot;Application Started&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Once you initialize an Analytics client, you can safely call any of its tracking methods from any thread. These events are dispatched asynchronously to the Intilery servers and to any Device-mode destinations.</p><p><strong>Note:</strong> You should only ever initialize <em>ONE</em> instance of the Analytics client. These are expensive to create and throw away, and in most cases, you should stick to Intilery’s singleton implementation to make using the SDK easier.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="step-3-add-permissions"></a>Step 3. Add Permissions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-3-add-permissions" title="Direct link to heading">#</a></h3><p>Ensure that the necessary permissions are declared in your application’s <code>AndroidManifest.xml</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> &lt;!-- Required for internet. --&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="data-collection---the-basic-intilery-api-calls"></a>Data Collection - The Basic Intilery API calls<a aria-hidden="true" tabindex="-1" class="hash-link" href="#data-collection---the-basic-intilery-api-calls" title="Direct link to heading">#</a></h2><p>The Intilery API calls include:</p><ul><li><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#identify" target="_blank" rel="noopener noreferrer">Identify</a></li><li><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#track" target="_blank" rel="noopener noreferrer">Track</a></li><li><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#screen" target="_blank" rel="noopener noreferrer">Screen</a></li><li><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#group" target="_blank" rel="noopener noreferrer">Group</a></li><li><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#alias" target="_blank" rel="noopener noreferrer">Alias</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="identify"></a>Identify<a aria-hidden="true" tabindex="-1" class="hash-link" href="#identify" title="Direct link to heading">#</a></h3><p><strong>Good to know</strong>: For any of the different methods described in this doc, you can replace the properties and traits in the code samples with variables that represent the data collected.</p><p>Identify calls let you tie a user to their actions, and record traits about them. It includes a unique User ID and any optional traits you know about them.</p><p>Example <code>identify</code> call:</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).identify(&quot;a user&#x27;s id&quot;, new Traits().putName(&quot;John Doe&quot;), null);</span></div></div></div></div></div><p>Intilery recommends that you make an Identify call once when the user’s first creates an account, and only using the Identify call later when their traits change. Intilery remembers the previous userIDs and merges the new traits with the old ones.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Initially when you only know the user&#x27;s name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).identify(new Traits().putName(&quot;Michael Bolton&quot;));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Sometime later in your app when the user gives you their email</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).identify(new Traits().putEmail(&quot;mbolton@example.com&quot;));</span></div></div></div></div></div><p>Remember, you can replace the properties and traits in the code samples with variables that represent the data you actually collected.</p><p>The Identify call has the following fields:</p><table><thead><tr><th><code>userId</code> <em>String,optional</em></th><th>The database ID for this user.</th></tr></thead><tbody><tr><td><code>traits</code> <em>Traits,optional</em></td><td>A map of traits about the user, such as their name, email, address, etc.</td></tr><tr><td><code>options</code> <em>Options, optional</em></td><td>Extra <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#selecting-destinations" target="_blank" rel="noopener noreferrer">options</a> for the call.</td></tr></tbody></table><p>The Android library currently automatically sends the <code>userId</code> and <code>anonymousId</code> as <code>traits</code>. Additionally, <code>traits</code> are sent in the <code>context.traits</code> field with every message.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="track"></a>Track<a aria-hidden="true" tabindex="-1" class="hash-link" href="#track" title="Direct link to heading">#</a></h3><p>The Track call lets you record the actions your users perform. Every action triggers what we call an “event”, which can also have associated properties.</p><p>To get started, the Analytics-Android SDK can automatically tracks a few key common events using the Intilery <a href="https://segment.com/docs/connections/spec/mobile/" target="_blank" rel="noopener noreferrer">Native Mobile Spec</a>, such as the <code>Application Installed</code>, <code>Application Updated</code> and <code>Application Opened</code>. You can enable this option during initialization.</p><p>You might also want to track events that indicate success for your mobile app, like <strong>Signed Up</strong>, <strong>Item Purchased</strong> or <strong>Article Bookmarked</strong>. Intilery recommends tracking just a few important events. You can always add more later!</p><p>Example <code>track</code> call:</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics analytics = new Analytics.Builder(context, writeKey)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .trackApplicationLifecycleEvents()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .build();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).track(&quot;Product Viewed&quot;, new Properties().putValue(&quot;name&quot;, &quot;Moto 360&quot;));</span></div></div></div></div></div><p>This example Track call tells us that your user just triggered the <strong>Product Viewed</strong> event with a name of “Moto 360.”</p><p>The Track call properties can be anything you want to record, for example:</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).track(&quot;Purchased Item&quot;, new Properties().putValue(&quot;sku&quot;, &quot;13d31&quot;).putRevenue(199.99));</span></div></div></div></div></div><p>The Track call includes the following fields:</p><table><thead><tr><th><code>name</code> <em>String,required</em></th><th>A name for the tracked action.</th></tr></thead><tbody><tr><td><code>properties</code> <em>Properties,optional</em></td><td>A map of properties for this action, e.g. revenue if the action was a purchase.</td></tr><tr><td><code>options</code> <em>Options,optional</em></td><td>Extra <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#selecting-destinations" target="_blank" rel="noopener noreferrer">options</a> for the call.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="screen"></a>Screen<a aria-hidden="true" tabindex="-1" class="hash-link" href="#screen" title="Direct link to heading">#</a></h3><p>The <a href="https://segment.com/docs/connections/spec/screen/" target="_blank" rel="noopener noreferrer">Screen</a> method lets you you record whenever a user sees a screen of your mobile app, along with optional extra information about the page being viewed.</p><p>You’ll want to record a screen event an event whenever the user opens a screen in your app. This could be a view, fragment, dialog or activity depending on your app.</p><p>Not all services support screen, so when it’s not supported explicitly, the screen method tracks as an event with the same parameters.</p><p>Example <code>screen</code> call:</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// category &quot;Feed&quot; and a property &quot;Feed Length&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).screen(&quot;Feed&quot;, new Properties().putValue(&quot;Feed Length&quot;, &quot;26&quot;));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// no category, name &quot;Photo Feed&quot; and a property &quot;Feed Length&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).screen(null, &quot;Photo Feed&quot;, new Properties().putValue(&quot;Feed Length&quot;, &quot;26&quot;));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// category &quot;Smartwatches&quot;, name &quot;Purchase Screen&quot;, and a property &quot;sku&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).screen(&quot;Smartwatches&quot;, &quot;Purchase Screen&quot;, new Properties().putValue(&quot;sku&quot;, &quot;13d31&quot;));</span></div></div></div></div></div><p>The <code>screen</code> call has the following fields:</p><table><thead><tr><th><code>category</code> *String,optional**</th><th>A category for the screen. Optional if name is provided.</th></tr></thead><tbody><tr><td><code>name</code> *String,optional**</td><td>A name for the screen. Optional if category is provided.</td></tr><tr><td><code>properties</code> <em>Properties,optional</em></td><td>A map of properties for this screen.</td></tr><tr><td><code>options</code> <em>Options,optional</em></td><td>Extra <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#selecting-destinations" target="_blank" rel="noopener noreferrer">options</a> for the call.</td></tr></tbody></table><p>Find details on the Screen payload in <a href="https://segment.com/docs/connections/spec/screen/" target="_blank" rel="noopener noreferrer">the Intilery Screen call spec</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="automatic-screen-tracking"></a>Automatic Screen Tracking<a aria-hidden="true" tabindex="-1" class="hash-link" href="#automatic-screen-tracking" title="Direct link to heading">#</a></h4><p>The Intilery SDK can automatically instrument screen calls, using the label of the activity you declared in the <code>manifest</code> as the screen’s name. Fragments and views do not trigger screen calls automatically, however you can manually call the Screen method for these.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics analytics = new Analytics.Builder(context, writeKey)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .recordScreenViews()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .build();</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="group"></a>Group<a aria-hidden="true" tabindex="-1" class="hash-link" href="#group" title="Direct link to heading">#</a></h3><p>Group calls let you associate an <a href="https://segment.com/docs/connections/sources/catalog/libraries/server/java/#identify" target="_blank" rel="noopener noreferrer">identified user</a> user with a group. A group could be a company, organization, account, project or team! It also lets you record custom traits about the group, like industry or number of employees.</p><p>This is useful for tools like <a href="https://segment.com/docs/connections/destinations/catalog/intercom/" target="_blank" rel="noopener noreferrer">Intercom</a>, <a href="https://segment.com/docs/connections/destinations/catalog/preact/" target="_blank" rel="noopener noreferrer">Preact</a> and <a href="https://segment.com/docs/connections/destinations/catalog/totango/" target="_blank" rel="noopener noreferrer">Totango</a>, as it ties the user to a <strong>group</strong> of other users.</p><p>Example <code>group</code> call:</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).group(&quot;a user&#x27;s id&quot;, &quot;a group id&quot;, new Traits().putEmployees(20));</span></div></div></div></div></div><p>The <code>group</code> call has the following fields:</p><table><thead><tr><th><code>userId</code> <em>String,required</em></th><th>The database ID for this user.</th></tr></thead><tbody><tr><td><code>groupdId</code> <em>String,required</em></td><td>The database ID for this group.</td></tr><tr><td><code>traits</code> <em>Traits,optional</em></td><td>A map of traits about the group, such as the number of employees, industry, etc.</td></tr><tr><td><code>options</code> <em>Options,optional</em></td><td>Extra <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#selecting-destinations" target="_blank" rel="noopener noreferrer">options</a> for the call.</td></tr></tbody></table><p>Find more details about the Group method, including the Group call payload, in the <a href="https://segment.com/docs/connections/spec/group/" target="_blank" rel="noopener noreferrer">Intilery Group call spec</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="alias"></a>Alias<a aria-hidden="true" tabindex="-1" class="hash-link" href="#alias" title="Direct link to heading">#</a></h3><p>Alias is how you associate one identity with another. This is an advanced method, but it is required to manage user identities successfully in <em>some</em> Intilery destinations, such as Mixpanel or Kissmetrics.</p><p><a href="https://segment.com/docs/connections/destinations/catalog/mixpanel/#alias" target="_blank" rel="noopener noreferrer">Mixpanel</a> used the Alais call to associate an anonymous user with an identified user once they sign up. For <a href="https://segment.com/docs/connections/destinations/catalog/kissmetrics/#alias" target="_blank" rel="noopener noreferrer">Kissmetrics</a>, if your user switches IDs, you can use ‘alias’ to rename the ‘userId’.</p><p>Example <code>alias</code> call:</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).alias(newId);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).identify(newId);</span></div></div></div></div></div><p>The <code>alias</code> call has the following fields:</p><table><thead><tr><th><code>newId</code> <em>String,required</em></th><th>The new ID to track this user with.</th></tr></thead><tbody><tr><td><code>options</code> <em>Options,optional</em></td><td>Extra <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#selecting-destinations" target="_blank" rel="noopener noreferrer">options</a> for the call.</td></tr></tbody></table><p>For more details about <code>alias</code>, including the <strong><code>alias</code> call payload</strong>, check out <a href="https://segment.com/docs/connections/spec/alias/" target="_blank" rel="noopener noreferrer">the Intilery Alais call spec</a>.</p><p>Note that the <code>previousId</code> is the value passed in as the <code>userId</code>, which Intilery cached after you made an <code>identify</code> call. Intilery passes that value as the <code>previousId</code> when you call <code>alias</code> and pass in a <code>newId</code>. If you have not called <code>identify</code>, the <code>previousId</code> is set to the <code>anonymousId</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="context"></a>Context<a aria-hidden="true" tabindex="-1" class="hash-link" href="#context" title="Direct link to heading">#</a></h2><p>Context is a dictionary of extra information you can provide about a specific API call. You can add any custom data to the context dictionary that you want to have access to in the raw logs. Some keys in the context dictionary <a href="https://segment.com/docs/connections/spec/common/#context" target="_blank" rel="noopener noreferrer">have semantic meaning and are collected for you automatically</a>, such as information about the user’s device.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">AnalyticsContext analyticsContext = Analytics.with(context).getAnalyticsContext();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">analyticsContext.putValue(...).putReferrer(...).putCampaign(...);</span></div></div></div></div></div><p>You can read more about these special fields in the <a href="https://segment.com/docs/connections/spec/common/#context" target="_blank" rel="noopener noreferrer">Intilery Common spec documentation</a>.</p><p>To alter data specific to the device object you can use the following:</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">AnalyticsContext analyticsContext = Analytics.with(context).getAnalyticsContext();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">analyticsContext.device().putValue(&quot;advertisingId&quot;, &quot;1&quot;);</span></div></div></div></div></div><p>To opt out of automatic data collection, clear the context after initializing the client. Do this <em>BEFORE</em> you send any events.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics analytics = new Analytics.Builder(context, writeKey).defaultOptions(defaultOptions).build();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AnalyticsContext context = getAnalyticsContext();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">context.clear();</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="routing-collected-data"></a>Routing collected data<a aria-hidden="true" tabindex="-1" class="hash-link" href="#routing-collected-data" title="Direct link to heading">#</a></h2><p>Once you set up calls using the basic Intilery data collection APIs, choose which destinations to send it to, and how you want to send it to them.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="sending-data-to-destinations"></a>Sending Data to destinations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#sending-data-to-destinations" title="Direct link to heading">#</a></h3><p>There are two ways to send data to your analytics services through this library:</p><ol><li>Through the Intilery servers, also known as “cloud-mode”</li><li>Directly from the user’s device (also known as “device-mode”) using bundled SDKs</li></ol><p><strong>Note:</strong> Refer to the specific destination’s docs to see if your tool must be bundled in the app or sent server-side.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="cloud-mode-in-android"></a>Cloud-Mode in Android<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cloud-mode-in-android" title="Direct link to heading">#</a></h4><p>When a destination is enabled for your Android source from the Intilery web app, but you haven’t packaged its SDK with your app, requests go through the Intilery REST API, and are routed to the destination service’s API as <a href="https://segment.com/docs/connections/destinations/#connection-modes" target="_blank" rel="noopener noreferrer">described here</a>. Most, but not all destinations offer a cloud-based connection mode, so it’s a good idea to <a href="https://segment.com/docs/util/cmodes-compare/" target="_blank" rel="noopener noreferrer">check for destinations that you might <em>need</em> to package</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="packaging-device-mode-destination-sdks"></a>Packaging device-mode destination SDKs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#packaging-device-mode-destination-sdks" title="Direct link to heading">#</a></h4><p>By default, Intilery’s <code>analytics</code> artifact does not package Device-mode destination SDKs.</p><p>We recommend using device-mode destinations on a need-to-use basis <em>only</em>, to reduce the size of your application, and to avoid running into the dreaded 65k method limit.</p><p>To package Device-mode destinations, first add the dependencies you need to your project. You can find these in the Intilery app when you open the destination for your source.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android.integrations:google-analytics:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;io.branch.segment.analytics.android.integrations:library:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Once you add the dependency, register the destination with the Analytics-Android SDK.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics analytics = new Analytics.Builder(context, writeKey)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .use(GoogleAnalyticsIntegration.FACTORY)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .use(BranchIntegration.FACTORY)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .build();</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="selecting-destinations"></a>Selecting Destinations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#selecting-destinations" title="Direct link to heading">#</a></h3><p>You can pass an <code>options</code> object on any of the basic Intilery API calls that allows you to turn specific destinations on or off. By default, all destinations are enabled. (In Intilery’s other libraries, you could do this in the list of <code>integrations</code> inside the <code>options</code> object.)</p><p>In the examples below, the first event is sent to all destinations, but the second one is sent to all except Mixpanel.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Sent to all destinations</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).track(&quot;Viewed Item&quot;, new Properties());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Sent to all destinations, except Mixpanel</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).track(&quot;Purchased Item&quot;, new Properties(), new Options().setIntegration(&quot;Mixpanel&quot;, false));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Sent only to Google Analytics and Countly</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).track(&quot;Purchased Item&quot;, new Properties(), new Options().setIntegration(Options.ALL_INTEGRATIONS_KEY, false).setIntegration(&quot;Countly&quot;, true).setIntegration(&quot;Google Analytics&quot;, true));</span></div></div></div></div></div><p>If you build your own instance of the client, you can also specify a default <code>options</code> object to use for each call. In the example below, <em>NONE</em> of the analytics events are sent to Heap.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Disable Heap destination</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Options defaultOptions = new Options().setIntegration(&quot;Heap&quot;, false);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Attach the options to our client</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics analytics = new Analytics.Builder(context, writeKey).defaultOptions(defaultOptions).build();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Set the client as a global singleton so it can be called from anywhere</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.setSingletonInstance(analytics);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Now any calls made with this Analytics client won&#x27;t be sent to Heap</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).track(&quot;Viewed Item&quot;, new Properties());</span></div></div></div></div></div><p>Notice that the first example uses an Enum to disable the destination, but the second example uses a String. Intilery recommends that you use the Enum method for Device-mode destinations, and use the String method to change the behavior of Cloud-mode destinations. The Enum method ensures type safety, and prevents you from accidentally disabling “GoogleAnalytics” instead of “Google Analytics”, while the String method gives you more flexibility in what options you pass to cloud-mode destinations.</p><p>Destination name flags are <strong>case sensitive</strong> and match <a href="https://segment.com/docs/connections/destinations/catalog/" target="_blank" rel="noopener noreferrer">the destination’s name in the docs</a> In some cases where a destination’s name has more than one spelling (for example if it changed names, or brand capitalization styles, or if it was commonly misspelled and we added an alias) the documentation for that destination will include a section called “Adding (destination name) to the integrations object”.</p><p><strong>Note:</strong> If you are on a business tier Intilery plan, you can filter track calls right from the Intilery App in the source schema page. This is a much simpler way to manage your filters, and you can update it without having to make and publish code changes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="utility-methods"></a>Utility methods<a aria-hidden="true" tabindex="-1" class="hash-link" href="#utility-methods" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="retrieve-anonymousid"></a>Retrieve AnonymousId<a aria-hidden="true" tabindex="-1" class="hash-link" href="#retrieve-anonymousid" title="Direct link to heading">#</a></h3><p>You can retrieve the <code>anonymousId</code> set by the library by using:</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).getAnalyticsContext().traits().anonymousId();</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="reset"></a>Reset<a aria-hidden="true" tabindex="-1" class="hash-link" href="#reset" title="Direct link to heading">#</a></h3><p>The <code>reset</code> method clears the SDK’s internal stores for the current user and group. This is useful for apps where users log in and out with different identities on the same device over time.</p><p>The example code below clears all information about the user.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).reset();</span></div></div></div></div></div><p><strong>Reset does not clear events in the queue</strong>, and any remaining events in the queue are sent the next time the app starts. You might want to call <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#flush" target="_blank" rel="noopener noreferrer">Flush</a> before you call Reset.</p><p><strong>Note</strong>: When you call <code>reset</code>, the next time the app opens Intilery generates a new AnonymousId. This can impact the number of Monthly Tracked Users (MTUs) you process.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="collecting-stats"></a>Collecting Stats<a aria-hidden="true" tabindex="-1" class="hash-link" href="#collecting-stats" title="Direct link to heading">#</a></h3><p>Local device stats help you quickly see how many events you sent to Intilery, the average time bundled destinations took to run, and similar metrics.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">StatsSnapshot snapshot = Analytics.with(context).getSnapshot();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">log(snapshot.integrationOperationAverageDuration);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">log(snapshot.flushCount);</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="adding-debug-logging"></a>Adding debug logging<a aria-hidden="true" tabindex="-1" class="hash-link" href="#adding-debug-logging" title="Direct link to heading">#</a></h3><p>If you run into issues while using the Android library, you can enable logging to help trace the issue. Logging also helps you see how long destinations take to complete their calls so you can find performance bottlenecks.</p><p>The logging is enabled by default in the default singleton instance if your application is running in <code>debug</code> mode. If you use a custom instance, attach a <code>LogLevel</code> to the <code>Builder</code> and set the logging level there, as in the example below.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics analytics = new Analytics.Builder(context, writeKey).logLevel(LogLevel.VERBOSE)...build();</span></div></div></div></div></div><p>You can choose to disable logging completely (<code>LogLevel.NONE</code>), enable basic logging for the SDK (<code>LogLevel.BASIC</code>), enable basic logging for Device-mode destination (<code>LogLevel.INFO</code>), or simply log everything (<code>LogLevel.VERBOSE</code>).</p><p>Intilery recommends that you turn logging off in <em>production</em> modes of your app.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="privacy-methods"></a>Privacy methods<a aria-hidden="true" tabindex="-1" class="hash-link" href="#privacy-methods" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="opt-out"></a>Opt-out<a aria-hidden="true" tabindex="-1" class="hash-link" href="#opt-out" title="Direct link to heading">#</a></h3><p>Depending on the audience for your app (for example, children) or the countries where you sell your app (for example, the EU), you may need to offer the ability for users to opt-out of analytics data collection inside your app. You can turn off ALL destinations including Intilery itself:</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(this).optOut(true);</span></div></div></div></div></div><p>Set the opt-out status for the current device and analytics client combination. This flag persists across device reboots, so you can call it once in your application, such as in a screen where a user can opt out of analytics tracking.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="anonymizing-ip"></a>Anonymizing IP<a aria-hidden="true" tabindex="-1" class="hash-link" href="#anonymizing-ip" title="Direct link to heading">#</a></h3><p>The Intilery iOS, Android, Analytics.js and Xamarin libraries automatically derive and set the IP address for events recorded on the user’s device. The IP is not collected on the device itself, but instead is filled in by Intilery’s servers when they receive a message.</p><p>To prevent Intilery from recording the users’ IP in destinations and S3, you can set the event’s <code>context.ip</code> field to <code>0.0.0.0</code>. The Intilery servers won’t overwrite this data if it comes from the client, and so do not record the IP address of the client.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="formatting-order-completed-events"></a>Formatting Order Completed Events<a aria-hidden="true" tabindex="-1" class="hash-link" href="#formatting-order-completed-events" title="Direct link to heading">#</a></h2><p>Intilery’s Android library provides several helper methods so you can easily construct both properties objects and products lists so your Order Completed events conform to the Intilery <a href="https://segment.com/docs/connections/spec/ecommerce/v2/" target="_blank" rel="noopener noreferrer">ecommerce specification</a>. Here’s a code example:</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import com.segment.analytics.Analytics;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import com.segment.analytics.Properties;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import com.segment.analytics.Properties.Product;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// initialize a new properties object</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Properties properties = new Properties();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// add orderId and revenue to the properties object</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">properties.putValue(&quot;orderId&quot;, String orderId).putValue(&quot;revenue&quot;, double revenue);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// initialize a new product</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Product product1 = new Product(String id, String sku, double price);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// initialize a second product</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Product product2 = new Product(String id, String sku, double price);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// add products to the properties object</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">properties.putProducts(product1, product2);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// pass the properties object into your Order Completed event</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics.with(context).track(&quot;Order Completed&quot;, properties);</span></div></div></div></div></div><p>Find details on <strong>best practices in event naming</strong> as well as the <strong>Track method payload</strong> in the <a href="https://segment.com/docs/connections/spec/track/" target="_blank" rel="noopener noreferrer">Intilery Track call spec</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="proxying-http-calls"></a>Proxying HTTP Calls<a aria-hidden="true" tabindex="-1" class="hash-link" href="#proxying-http-calls" title="Direct link to heading">#</a></h2><p>You can point the Android SDK to your own hosted <a href="https://github.com/segmentio/segment-proxy" target="_blank" rel="noopener noreferrer">proxy</a> of the Intilery API. This runs the HTTP traffic for the Intilery API through the proxy.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics analytics = new Analytics.Builder(this, ANALYTICS_WRITE_KEY) //</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        .connectionFactory(new ConnectionFactory() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          @Override protected HttpURLConnection openConnection(String url) throws IOException {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            String path = Uri.parse(url).getPath();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            // Replace YOUR_PROXY_HOST with the address of your proxy, e.g. https://aba64da6.ngrok.io.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            return super.openConnection(&quot;YOUR_PROXY_HOST&quot; + path);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        })</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        .build();</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="analytics-android-versions"></a>Analytics-Android Versions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#analytics-android-versions" title="Direct link to heading">#</a></h2><p>This section includes information on:</p><ul><li><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#bleeding-edge-releases" target="_blank" rel="noopener noreferrer">Bleeding Edge Releases</a></li><li><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#support-for-older-versions-of-android" target="_blank" rel="noopener noreferrer">Support for Older versions of Android</a></li><li><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#migrating-from-v2-to-v3" target="_blank" rel="noopener noreferrer">Migrating from v2 to v3</a></li><li><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#migrating-to-v4" target="_blank" rel="noopener noreferrer">Migrating to v4</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="bleeding-edge-releases"></a>Bleeding Edge Releases<a aria-hidden="true" tabindex="-1" class="hash-link" href="#bleeding-edge-releases" title="Direct link to heading">#</a></h3><p>Intilery publishes stable releases every second Wednesday, when we tag and release the <code>master</code> branch.</p><p>After releasing, we also merge the <code>dev</code> branch merged into <code>master</code>. In general, code will be available on <code>master</code> for two weeks before being tagged as a stable release. During this period, <code>master</code> is published as a snapshot — the equivalent of bleeding edge releases. We recommend using the snapshot version to try out upcoming features and fixes that have not been published yet. Simply add the snapshots repo to your repository and Gradle will pull in the latest snapshot build.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">repositories {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  mavenCentral()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  maven { url &#x27;https://oss.sonatype.org/content/repositories/snapshots/&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="support-for-older-versions-of-android"></a>Support for Older versions of Android<a aria-hidden="true" tabindex="-1" class="hash-link" href="#support-for-older-versions-of-android" title="Direct link to heading">#</a></h3><p>The Analytics-Android library supports back to API level 14 (Android 4.0). You should <a href="https://developer.android.com/about/dashboards/index.html#Platform" target="_blank" rel="noopener noreferrer">consider it too</a>! If you can’t do this for your own application, there are three options we recommend:</p><ol><li>Use an older version of the Analytics-Android library that supports your minimum requirements. Remember that there won’t be any updates or bug fixes to those versions, but you might still have clients using old versions of the library in production.</li><li>Skip running analytics for users on older devices by wrapping calls to the Analytics-Android SDK in a <code>Build.VERSION</code> check.</li><li>Write your own SDK. You can still use most of the tools on Intilery using the <a href="https://segment.com/docs/connections/sources/catalog/libraries/server/http/" target="_blank" rel="noopener noreferrer">HTTP API</a>. You can use either the Analytics-Android or <a href="https://github.com/segmentio/analytics-java" target="_blank" rel="noopener noreferrer">Java source</a> to get a quick head start.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="migrating-from-v2-to-v3"></a>Migrating from v2 to v3<a aria-hidden="true" tabindex="-1" class="hash-link" href="#migrating-from-v2-to-v3" title="Direct link to heading">#</a></h3><p>Version 3 deprecated in favor of Version 4</p><p>See the <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#migrating-to-v4" target="_blank" rel="noopener noreferrer">section below for instructions on how to upgrade</a>.</p><p>If you are already using version 2 of the Android SDK, you’ll have to make few changes to get up and running with version 3.</p><p>In version 3, we’ve organized the destinations to be make the core SDK even leaner and smaller. This is what the old set up looked like:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android:analytics-core:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Add other dependencies as you want here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile &#x27;com.google.android.gms:play-services:+&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile &#x27;com.mixpanel.android:mixpanel-android:+@aar&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile files(&#x27;libs/QuantcastAndroidSdk.jar&#x27;)</span></div></div></div></div></div><p>In the new version, instead of adding the destinations directly, simply add the Intilery destination modules as a dependency instead. This also ensures that the version of the Device-mode destination you’re using matches the one we depend on.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android:analytics-core:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Add other dependencies as you want here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android:analytics-integration-google-analytics:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android:analytics-integration-mixpanel:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android:analytics-integration-quantcast:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Earlier, you could control the debugging behaviour with a boolean flag. In version 3, this is replaced by the more powerful <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#debugging" target="_blank" rel="noopener noreferrer"><code>LogLevel</code></a> Enum, that lets you not only control the logging behavior of the Analytics-Android SDK, but also for Device-mode destinations.</p><p>Version 2 of the SDK also let you customize the behaviour of the SDK by providing resource values in XML. Version 3 ignores these custom options from XML to simplify behaviour and improve performance. The recommended way to customize the Analytics client is to use the <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#optional-customizing-the-client" target="_blank" rel="noopener noreferrer">Builder</a> methods instead.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="migrating-to-v4"></a>Migrating to v4<a aria-hidden="true" tabindex="-1" class="hash-link" href="#migrating-to-v4" title="Direct link to heading">#</a></h3><p><strong>Note:</strong> If you are using version 2 of the Android SDK, you’ll have to make few changes to get up and running with <a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#migrating-to-v4" target="_blank" rel="noopener noreferrer">version 3</a>.</p><p>In version 3, adding a Device-mode destination looks like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android:analytics-core:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Add other dependencies as you want here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android:analytics-integration-google-analytics:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android:analytics-integration-mixpanel:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android:analytics-integration-quantcast:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>or, if you wanted to use all Device-mode destinations:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android:analytics:+&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>In version 4, the <code>analytics-core</code> artifact is not available any longer. It has been renamed to <code>analytics</code> (which previously packaged all Device-mode destinations). Version 4 of <code>analytics</code> only includes the Intilery destination. Which means, to package a Device-mode destination, you must manually add that dependency.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile &#x27;com.segment.analytics.android:analytics:+&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;com.segment.analytics.android.integrations:google-analytics:1.0.0&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">compile(&#x27;io.branch.segment.analytics.android.integrations:library:1.0.0-RELEASE&#x27;) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  transitive = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>In addition to adding a dependency, you must point the Analytics-Android SDK to the destination.</p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Java</a></p><p><a href="https://segment.com/docs/connections/sources/catalog/libraries/mobile/android/#" target="_blank" rel="noopener noreferrer">Kotlin</a></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Analytics analytics = new Analytics.Builder(context, writeKey)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .use(GoogleAnalyticsIntegration.FACTORY)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .use(BranchIntegration.FACTORY)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  .build();</span></div></div></div></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/sdk/ios-faq"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Intilery-iOS Frequently Asked Questions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/sdk/android-quickstart"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Quickstart android »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#analytics-android-and-unique-identifiers" class="table-of-contents__link">Analytics-Android and Unique Identifiers</a></li><li><a href="#api-call-queuing-in-analytics-android" class="table-of-contents__link">API call queuing in Analytics-Android</a><ul><li><a href="#queue-persistance-in-analytics-android" class="table-of-contents__link">Queue persistance in Analytics-Android</a></li></ul></li><li><a href="#getting-started" class="table-of-contents__link">Getting Started</a><ul><li><a href="#step-1-install-the-library" class="table-of-contents__link">Step 1: Install the Library</a></li><li><a href="#step-2-initialize-the-client" class="table-of-contents__link">Step 2. Initialize the Client</a></li><li><a href="#customize-the-client-optional" class="table-of-contents__link">Customize the Client (Optional)</a></li><li><a href="#step-3-add-permissions" class="table-of-contents__link">Step 3. Add Permissions</a></li></ul></li><li><a href="#data-collection---the-basic-intilery-api-calls" class="table-of-contents__link">Data Collection - The Basic Intilery API calls</a><ul><li><a href="#identify" class="table-of-contents__link">Identify</a></li><li><a href="#track" class="table-of-contents__link">Track</a></li><li><a href="#screen" class="table-of-contents__link">Screen</a></li><li><a href="#group" class="table-of-contents__link">Group</a></li><li><a href="#alias" class="table-of-contents__link">Alias</a></li></ul></li><li><a href="#context" class="table-of-contents__link">Context</a></li><li><a href="#routing-collected-data" class="table-of-contents__link">Routing collected data</a><ul><li><a href="#sending-data-to-destinations" class="table-of-contents__link">Sending Data to destinations</a></li><li><a href="#selecting-destinations" class="table-of-contents__link">Selecting Destinations</a></li></ul></li><li><a href="#utility-methods" class="table-of-contents__link">Utility methods</a><ul><li><a href="#retrieve-anonymousid" class="table-of-contents__link">Retrieve AnonymousId</a></li><li><a href="#reset" class="table-of-contents__link">Reset</a></li><li><a href="#collecting-stats" class="table-of-contents__link">Collecting Stats</a></li><li><a href="#adding-debug-logging" class="table-of-contents__link">Adding debug logging</a></li></ul></li><li><a href="#privacy-methods" class="table-of-contents__link">Privacy methods</a><ul><li><a href="#opt-out" class="table-of-contents__link">Opt-out</a></li><li><a href="#anonymizing-ip" class="table-of-contents__link">Anonymizing IP</a></li></ul></li><li><a href="#formatting-order-completed-events" class="table-of-contents__link">Formatting Order Completed Events</a></li><li><a href="#proxying-http-calls" class="table-of-contents__link">Proxying HTTP Calls</a></li><li><a href="#analytics-android-versions" class="table-of-contents__link">Analytics-Android Versions</a><ul><li><a href="#bleeding-edge-releases" class="table-of-contents__link">Bleeding Edge Releases</a></li><li><a href="#support-for-older-versions-of-android" class="table-of-contents__link">Support for Older versions of Android</a></li><li><a href="#migrating-from-v2-to-v3" class="table-of-contents__link">Migrating from v2 to v3</a></li><li><a href="#migrating-to-v4" class="table-of-contents__link">Migrating to v4</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/apis/api1">API Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tag/tag1">JavaScript Tag</a></li><li class="footer__item"><a href="http://support.intilery.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">User Guides</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/intilery" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/Intilery/intilery.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2021 Intilery.com Ltd.</div></div></div></footer></div>
<script src="/styles.10a908dc.js"></script>
<script src="/runtime~main.e57862d9.js"></script>
<script src="/main.032e272f.js"></script>
<script src="/1.1a84291b.js"></script>
<script src="/2.62dafb1b.js"></script>
<script src="/3.653c2984.js"></script>
<script src="/1be78505.ec0c1a47.js"></script>
<script src="/56.dd781550.js"></script>
<script src="/20ac7829.a0ce566a.js"></script>
<script src="/17896441.6875d58f.js"></script>
<script src="/f6ce9845.7ffe9bda.js"></script>
</body>
</html>