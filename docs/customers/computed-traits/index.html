<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-9T47KP3LPV","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Intilery Documentation" href="/opensearch.xml"><title data-react-helmet="true">Computed Traits | Intilery Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Computed Traits | Intilery Documentation"><meta data-react-helmet="true" name="description" content="Computed Traits allow you to quickly create customer-level calculations that Intilery keeps up-to-date over time. These can be computations like the totalnumorders a customer has completed, the lifetimerevenue of a customer, the mostfrequent_category to determine which category the customer most frequently pruchases. These computations are based on your events and event properties that you are sending through Intilery on the page and track calls."><meta data-react-helmet="true" property="og:description" content="Computed Traits allow you to quickly create customer-level calculations that Intilery keeps up-to-date over time. These can be computations like the totalnumorders a customer has completed, the lifetimerevenue of a customer, the mostfrequent_category to determine which category the customer most frequently pruchases. These computations are based on your events and event properties that you are sending through Intilery on the page and track calls."><meta data-react-helmet="true" property="og:url" content="https://intilery.com/docs/customers/computed-traits"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://intilery.com/docs/customers/computed-traits"><link rel="stylesheet" href="/styles.53afc697.css">
<link rel="preload" href="/styles.fb872aef.js" as="script">
<link rel="preload" href="/runtime~main.bfc2ac1c.js" as="script">
<link rel="preload" href="/main.735e3280.js" as="script">
<link rel="preload" href="/1.5bd2f341.js" as="script">
<link rel="preload" href="/2.caea230a.js" as="script">
<link rel="preload" href="/3.5d645040.js" as="script">
<link rel="preload" href="/1be78505.4bd44a92.js" as="script">
<link rel="preload" href="/60.336ef576.js" as="script">
<link rel="preload" href="/20ac7829.54b2166b.js" as="script">
<link rel="preload" href="/17896441.7d917f07.js" as="script">
<link rel="preload" href="/33efd48b.a0b3d174.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="intilery"><strong class="navbar__title">intilery</strong></a><a class="navbar__item navbar__link" href="/docs/guides/contents">Guides</a><a class="navbar__item navbar__link" href="/docs/apis/api1">APIs</a><a class="navbar__item navbar__link" href="/docs/tag/tag1">Tag</a><a class="navbar__item navbar__link" href="/docs/sdk/ios">SDK</a><a class="navbar__item navbar__link" href="/docs/schema/contents">Schema</a><a class="navbar__item navbar__link" href="/docs/customers/overview">Customers</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/Intilery/intilery.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="intilery"><strong class="navbar__title">intilery</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/guides/contents">Guides</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/apis/api1">APIs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tag/tag1">Tag</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/sdk/ios">SDK</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/schema/contents">Schema</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/customers/overview">Customers</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/Intilery/intilery.github.io" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Customers Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/customers/overview">Customers</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/customers/computed-traits">Computed Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/customers/sql-traits">SQL Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/customers/audiences">Audiences</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Computed Traits</h1></header><div class="markdown"><p>Computed Traits allow you to quickly create customer-level calculations that Intilery keeps up-to-date over time. These can be computations like the <code>total_num_orders</code> a customer has completed, the <code>lifetime_revenue</code> of a customer, the <code>most_frequent_category</code> to determine which category the customer most frequently pruchases. These computations are based on your events and event properties that you are sending through Intilery on the <a href="/docs/schema/page">page</a> and <a href="/docs/schema/track">track</a> calls.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="types-of-computed-traits"></a>Types of Computed Traits<a aria-hidden="true" tabindex="-1" class="hash-link" href="#types-of-computed-traits" title="Direct link to heading">#</a></h2><p>Customers currently supports the following types of computed traits:</p><ul><li>Types of Computed Traits<ul><li><a href="#event-counter">Event Counter</a></li><li><a href="#aggregation">Aggregation</a></li><li><a href="#most-frequent">Most Frequent</a></li><li><a href="#first">First</a></li><li><a href="#last">Last</a></li><li><a href="#unique-list">Unique List</a></li><li><a href="#unique-list-count">Unique List Count</a></li></ul></li><li><a href="#conditions">Conditions</a></li><li><a href="#accessing-your-computed-traits-using-the-profiles-api">Accessing your Computed Traits using the Profiles API</a></li></ul><p><img src="/img/computed-traits.png" alt="Computed Traits"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="event-counter"></a>Event Counter<a aria-hidden="true" tabindex="-1" class="hash-link" href="#event-counter" title="Direct link to heading">#</a></h3><p>An Event Counter trait stores a count of an <strong>event</strong> over a period of time. For example, you can create a trait called <code>number_logins_90_days</code> based on a <code>User Logged In</code> event. You can also use event properties to only specific types of events.</p><p>Customer-level examples:</p><ul><li>Orders Completed Last 30 Days</li><li>Pricing Page Views Last 30 Days</li></ul><p><img src="/img/event-counter.png" alt="Event Counter"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="aggregation"></a>Aggregation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#aggregation" title="Direct link to heading">#</a></h3><p>An aggregation computes a <strong>sum, average, minimum, or maximum</strong> of a numeric <strong>event property</strong>. A good example is a <code>sum_games_revenue_90_days</code> if you’re sending an <code>Order Completed</code> event with a <code>revenue</code> property. In the example we’re refining the revenue even further based on another event property: <code>category = &#x27;games&#x27;</code>. Note that you can only compute an aggregation trait for event properties that have a numeric value.</p><p>Customer-level examples:</p><ul><li>Order Revenue Last 14 Days</li><li>Max Ride Distance Last 60 Days</li></ul><p><img src="/img/aggregation.png" alt="Aggregation"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="most-frequent"></a>Most Frequent<a aria-hidden="true" tabindex="-1" class="hash-link" href="#most-frequent" title="Direct link to heading">#</a></h3><p>A most frequent customer-level computed trait will return the <strong>most common value</strong> for an <strong>event property</strong>. This is helpful to create traits like <code>preferred_product_viewed</code> or <code>most_commonly_viewed_category</code> that tell you what a customer&#x27;s preferred product, or content category might be. Note that the most frequent computed trait requires the event property to have been tracked at least twice. In the case of a tie, we return the first alphabetical value.</p><p>Customer-level examples:</p><ul><li>Favorite Blog Post</li><li>Top Purchase Category</li></ul><p><img src="/img/most-frequent.png" alt="Most Frequent"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="first"></a>First<a aria-hidden="true" tabindex="-1" class="hash-link" href="#first" title="Direct link to heading">#</a></h3><p>The first customer-level trait returns the first event property value we have seen. This is common for creating traits like <code>first_page_visited</code> based on the page name.</p><p>Customer-level examples:</p><ul><li>First seen timestamp</li><li>First utm parameter</li></ul><p><img src="/img/first.png" alt="First"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="last"></a>Last<a aria-hidden="true" tabindex="-1" class="hash-link" href="#last" title="Direct link to heading">#</a></h3><p>The last trait returns the last event property value we have seen. This is common for creating traits like <code>last_utm_campaign</code> to help you calculate last-touch attribution for paid advertising.</p><p>Customer-level examples:</p><ul><li>Last seen at</li><li>Last utm parameter</li></ul><p><img src="/img/last.png" alt="Last"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="unique-list"></a>Unique List<a aria-hidden="true" tabindex="-1" class="hash-link" href="#unique-list" title="Direct link to heading">#</a></h3><p>Unique list computed traits will output a <strong>list of unique values</strong> for an <strong>event property</strong>. This is helpful to understand the different types of products or content that a customer has interacted with or purchased. You can create a triat like <code>unique_product_categories_viewed</code> and send marketing communications based on the categories viewed.</p><p>Example use cases:</p><ul><li>Unique products purchased</li><li>Unique categories</li><li>Unique games played</li></ul><p><img src="/img/unique-list.png" alt="Unique List"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="unique-list-count"></a>Unique List Count<a aria-hidden="true" tabindex="-1" class="hash-link" href="#unique-list-count" title="Direct link to heading">#</a></h3><p>Unique list count computed traits will output a <strong>count of the unique list of values</strong> for an <strong>event property</strong>. You can create a traits like <code>unique_product_categories_viewed_count</code> to understand the variety of products that a customer is viewing.</p><p>Customer-level examples:</p><ul><li>Unique products viewed count</li><li>Unique categories count</li></ul><p><img src="/img/unique-list-count.png" alt="Unique List Count"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="conditions"></a>Conditions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#conditions" title="Direct link to heading">#</a></h2><p>All computed trait types support a common “Add Conditions” section. Conditions defined here restrict the messages considered when calculating the final value of the computed trait by looking at a property of the events. For example, you could limits events to only those where “price” is greater than 30.00 or where “page.url” contains “pricing”.</p><p>The following operators are available.</p><ul><li>equals</li><li>not equals -</li><li>less than</li><li>greater than</li><li>less than or equal</li><li>greater than or equal</li><li>contains</li><li>does not contain</li><li>starts with</li><li>ends with</li><li>exists</li><li>not exists</li><li>before date</li><li>after date</li><li>within last (x days)</li><li>with next (x days)</li><li>before last (x days)</li><li>after next (x days)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="accessing-your-computed-traits-using-the-profiles-api"></a>Accessing your Computed Traits using the Profiles API<a aria-hidden="true" tabindex="-1" class="hash-link" href="#accessing-your-computed-traits-using-the-profiles-api" title="Direct link to heading">#</a></h2><p>You can access your computed traits using the Profile API by querying the <code>/traits</code> endpoint. All types of traits are returned for the customer</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">https://tracking.intilery.com/track/intilery/marketing/MARKETING/v1/profiles/email:xxx.xxx@intilery.com/traits</span></div></div></div></div></div><p>returns:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;lastName&quot;: &quot;Bloggs&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;website&quot;: &quot;www.intilery.com&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;externalId&quot;: &quot;joe.bloggs@intilery.com&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;organisation&quot;: &quot;Intilery&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;industry&quot;: &quot;Other&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;firstName&quot;: &quot;Joe&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;phone&quot;: &quot;+44111222333444&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;4c90b9cf-5e4d-4689-ba57-b0f3e7c813fe&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;computed&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;number_logins_90_days&quot;: 9,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;sum_games_revenue_90_days&quot;:99.99</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;email&quot;: &quot;joe.bloggs@intilery.com&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>You can read the <a href="/docs/apis/profile">full Profile API docs</a> to learn more.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/customers/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Customer Data Platform</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/customers/sql-traits"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SQL Traits »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#types-of-computed-traits" class="table-of-contents__link">Types of Computed Traits</a><ul><li><a href="#event-counter" class="table-of-contents__link">Event Counter</a></li><li><a href="#aggregation" class="table-of-contents__link">Aggregation</a></li><li><a href="#most-frequent" class="table-of-contents__link">Most Frequent</a></li><li><a href="#first" class="table-of-contents__link">First</a></li><li><a href="#last" class="table-of-contents__link">Last</a></li><li><a href="#unique-list" class="table-of-contents__link">Unique List</a></li><li><a href="#unique-list-count" class="table-of-contents__link">Unique List Count</a></li></ul></li><li><a href="#conditions" class="table-of-contents__link">Conditions</a></li><li><a href="#accessing-your-computed-traits-using-the-profiles-api" class="table-of-contents__link">Accessing your Computed Traits using the Profiles API</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/apis/api1">API Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tag/tag1">JavaScript Tag</a></li><li class="footer__item"><a href="http://support.intilery.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">User Guides</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/intilery" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/Intilery/intilery.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2021 Intilery.com Ltd.</div></div></div></footer></div>
<script src="/styles.fb872aef.js"></script>
<script src="/runtime~main.bfc2ac1c.js"></script>
<script src="/main.735e3280.js"></script>
<script src="/1.5bd2f341.js"></script>
<script src="/2.caea230a.js"></script>
<script src="/3.5d645040.js"></script>
<script src="/1be78505.4bd44a92.js"></script>
<script src="/60.336ef576.js"></script>
<script src="/20ac7829.54b2166b.js"></script>
<script src="/17896441.7d917f07.js"></script>
<script src="/33efd48b.a0b3d174.js"></script>
</body>
</html>